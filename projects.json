[{"params":{"slug":"async-confirm"},"props":{"blocks":[{"type":"paragraph","content":[{"type":"text","text":{"content":"I’m not a fan of how I currently implement confirmation dialogs. It feels like I’m mixing together the visual state and the actions to be executed all into one component. While it works, when I often read the code I find it difficult to digest, so I wanted to explore implementing a confirmation dialog in an asynchronous pattern.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I’m not a fan of how I currently implement confirmation dialogs. It feels like I’m mixing together the visual state and the actions to be executed all into one component. While it works, when I often read the code I find it difficult to digest, so I wanted to explore implementing a confirmation dialog in an asynchronous pattern.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Quick Definitions","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Quick Definitions","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A modal is any popup that visually appears above the current page, capturing the user’s attention for a task that requires immediate action. It’s a blocking element meaning that the modal’s task needs to be completed before the user can continue. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A modal is any popup that visually appears above the current page, capturing the user’s attention for a task that requires immediate action. It’s a blocking element meaning that the modal’s task needs to be completed before the user can continue. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A confirmation is a subset of a modal that acts as a safety net before an action and is typically used with destructive actions - i.e user confirmation before deleting an account. While the async method we discover below can be altered to fit all modals, in this post we will only focus on confirmation dialogs to keep the scope limited. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A confirmation is a subset of a modal that acts as a safety net before an action and is typically used with destructive actions - i.e user confirmation before deleting an account. While the async method we discover below can be altered to fit all modals, in this post we will only focus on confirmation dialogs to keep the scope limited. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"A Simple Example","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A Simple Example","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In this post, we will design and implement a confirmation dialog to verify that user wants to delete their account. Let’s get started by understanding the different states that this problem can be in - drawing out the user’s flow.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In this post, we will design and implement a confirmation dialog to verify that user wants to delete their account. Let’s get started by understanding the different states that this problem can be in - drawing out the user’s flow.","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"Flow chart representing the different states that a user can flow through","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Flow chart representing the different states that a user can flow through","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"Before we get started on the async solution, here is a simple implementation of the above flow chart. This is quite similar to how I ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Before we get started on the async solution, here is a simple implementation of the above flow chart. This is quite similar to how I ","href":null},{"type":"text","text":{"content":"used","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"used","href":null},{"type":"text","text":{"content":" to implement my confirmation dialogs. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to implement my confirmation dialogs. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"export function DialogDemo() {\n  //Controls the visual state of dialog\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const { toast } = useToast();\n\n  const handleOpenDialog = () => {\n    setShowConfirmDialog(true);\n  };\n\n  const handleCancel = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Phew, that was close!\",\n    });\n  };\n  const handleConfirm = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Account deleted\",\n      variant: \"destructive\",\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={handleOpenDialog}>Delete Account</Button>\n      <Confirmation\n        // Additional props to make this a reusuable component\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n        isOpen={showConfirmDialog}\n        // Actions to be run upon cancellation.\n        onCancel={handleCancel}\n        onConfirm={handleConfirm}\n      />\n      <Toaster />\n    </>\n  );\n}\n\ntype ConfirmationProps = {\n  title: React.ReactNode,\n  description: React.ReactNode,\n  confirmLabel: string,\n  isOpen: boolean,\n  onConfirm: () => void,\n  onCancel: () => void,\n};\nconst Confirmation = (props: ConfirmationProps) => {\n  return (\n    //Alert Dialog shows the component depending on the state of the open prop\n    <AlertDialog open={props.isOpen}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{props.title}</AlertDialogTitle>\n          <AlertDialogDescription>{props.description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={props.onCancel}>Cancel</AlertDialogCancel>\n          <AlertDialogAction onClick={props.onConfirm}>\n            {props.confirmLabel}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export function DialogDemo() {\n  //Controls the visual state of dialog\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const { toast } = useToast();\n\n  const handleOpenDialog = () => {\n    setShowConfirmDialog(true);\n  };\n\n  const handleCancel = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Phew, that was close!\",\n    });\n  };\n  const handleConfirm = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Account deleted\",\n      variant: \"destructive\",\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={handleOpenDialog}>Delete Account</Button>\n      <Confirmation\n        // Additional props to make this a reusuable component\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n        isOpen={showConfirmDialog}\n        // Actions to be run upon cancellation.\n        onCancel={handleCancel}\n        onConfirm={handleConfirm}\n      />\n      <Toaster />\n    </>\n  );\n}\n\ntype ConfirmationProps = {\n  title: React.ReactNode,\n  description: React.ReactNode,\n  confirmLabel: string,\n  isOpen: boolean,\n  onConfirm: () => void,\n  onCancel: () => void,\n};\nconst Confirmation = (props: ConfirmationProps) => {\n  return (\n    //Alert Dialog shows the component depending on the state of the open prop\n    <AlertDialog open={props.isOpen}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{props.title}</AlertDialogTitle>\n          <AlertDialogDescription>{props.description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={props.onCancel}>Cancel</AlertDialogCancel>\n          <AlertDialogAction onClick={props.onConfirm}>\n            {props.confirmLabel}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"In the parent component ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In the parent component ","href":null},{"type":"text","text":{"content":"DialogDemo","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"DialogDemo","href":null},{"type":"text","text":{"content":" we’ve defined 3 functions that manages opening the dialog and the actions that will be run upon confirmation and cancellation. The visual state is managed here via the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" we’ve defined 3 functions that manages opening the dialog and the actions that will be run upon confirmation and cancellation. The visual state is managed here via the ","href":null},{"type":"text","text":{"content":"showConfirmDialog","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"showConfirmDialog","href":null},{"type":"text","text":{"content":" state variable. All these are then passed as props into a reusable ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" state variable. All these are then passed as props into a reusable ","href":null},{"type":"text","text":{"content":"Confirmation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Confirmation","href":null},{"type":"text","text":{"content":" component which is a wrapper around ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" component which is a wrapper around ","href":null},{"type":"text","text":{"content":"Shadcn","link":{"url":"https://ui.shadcn.com/docs/components/alert-dialog"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Shadcn","href":"https://ui.shadcn.com/docs/components/alert-dialog"},{"type":"text","text":{"content":"’s excellent ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"’s excellent ","href":null},{"type":"text","text":{"content":"AlertDialog","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"AlertDialog","href":null},{"type":"text","text":{"content":" , powered by ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" , powered by ","href":null},{"type":"text","text":{"content":"Radix UI","link":{"url":"https://www.radix-ui.com/docs/primitives/components/alert-dialog#api-reference"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Radix UI","href":"https://www.radix-ui.com/docs/primitives/components/alert-dialog#api-reference"},{"type":"text","text":{"content":" which manages the UI parts of the rendering. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" which manages the UI parts of the rendering. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Solution Design","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Solution Design","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"quote","content":[{"type":"text","text":{"content":"“Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. ...[Therefore,] making it easy to read makes it easier to write.”\n― Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"“Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. ...[Therefore,] making it easy to read makes it easier to write.”\n― Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"While the above solution implements the flow chart, when reading the code, I find that it lacks clarity in explaining the confirmation dialog progresses from one state to another.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"While the above solution implements the flow chart, when reading the code, I find that it lacks clarity in explaining the confirmation dialog progresses from one state to another.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I wanted to create an abstraction with improved readability that would allow the reader to understand what’s happening in a procedural manner. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I wanted to create an abstraction with improved readability that would allow the reader to understand what’s happening in a procedural manner. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I was inspired from browser native ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I was inspired from browser native ","href":null},{"type":"text","text":{"content":"confirm api","link":{"url":"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"confirm api","href":"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"},{"type":"text","text":{"content":". Here is how it works - by calling the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". Here is how it works - by calling the ","href":null},{"type":"text","text":{"content":"confirm()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"confirm()","href":null},{"type":"text","text":{"content":" function, a synchronous modal opens with the text you passed in as a parameter. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" function, a synchronous modal opens with the text you passed in as a parameter. ","href":null},{"type":"text","text":{"content":"It stops code execution on your app as it blocks the javascript thread until a response is provided.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"It stops code execution on your app as it blocks the javascript thread until a response is provided.","href":null},{"type":"text","text":{"content":" ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"red"},"plain_text":" ","href":null},{"type":"text","text":{"content":"The response is provided via two buttons, Cancel and OK. If the user selects OK, the function returns true, else it returns false. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The response is provided via two buttons, Cancel and OK. If the user selects OK, the function returns true, else it returns false. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"There are clear drawbacks in terms of customisation. This includes the fact that the modal appears in a separate window and the labels and dialog cannot be modified. In terms of performance, the function runs synchronously, meaning that all background code execution in your app is paused until the user responds.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"There are clear drawbacks in terms of customisation. This includes the fact that the modal appears in a separate window and the labels and dialog cannot be modified. In terms of performance, the function runs synchronously, meaning that all background code execution in your app is paused until the user responds.","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"The confirmation dialog when using the Arc browser. Notice how the icon of the browser shows up in this dialog.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The confirmation dialog when using the Arc browser. Notice how the icon of the browser shows up in this dialog.","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"Following the api of the native confirm method, I want to explore implementing a component that can be ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Following the api of the native confirm method, I want to explore implementing a component that can be ","href":null},{"type":"text","text":{"content":"asynchronously","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"asynchronously","href":null},{"type":"text","text":{"content":" closed. When I consume this api, it should look like this","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" closed. When I consume this api, it should look like this","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const handleDelete = async () => {\n\t// This should automagically open the dialog\n  const result = await getConfirmation(); \n\n  // The following code should only execute after the dialog is closed by the user.\n  if (result === true) {\n    // Confirm was clicked\n    runCofirmAction();\n  } else {\n    // Cancel was clicked\n    runCancelAction();\n  }\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const handleDelete = async () => {\n\t// This should automagically open the dialog\n  const result = await getConfirmation(); \n\n  // The following code should only execute after the dialog is closed by the user.\n  if (result === true) {\n    // Confirm was clicked\n    runCofirmAction();\n  } else {\n    // Cancel was clicked\n    runCancelAction();\n  }\n};","href":null}],"language":"javascript"},{"type":"heading_1","content":[{"type":"text","text":{"content":"Implementation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Implementation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s break down what we’re trying to accomplish here. We need to wait on a promise that opens the dialog when it starts. This promise is only resolved when either the confirm or cancel button is clicked, returning true or false respectively. We can then use this boolean to control the flow of the code and execute the corresponding action.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s break down what we’re trying to accomplish here. We need to wait on a promise that opens the dialog when it starts. This promise is only resolved when either the confirm or cancel button is clicked, returning true or false respectively. We can then use this boolean to control the flow of the code and execute the corresponding action.","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Encapsulating the Visual State logic","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Encapsulating the Visual State logic","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s start by creating a simple hook called ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s start by creating a simple hook called ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" to contain the opening and closing of the dialog. This hook should return two objects, a function which can trigger opening the modal and the modal component itself. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to contain the opening and closing of the dialog. This hook should return two objects, a function which can trigger opening the modal and the modal component itself. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n\n  const getConfirmation = () => {\n    setOpen(true);\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n  };\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleClick}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleClick}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n\n  const getConfirmation = () => {\n    setOpen(true);\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n  };\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleClick}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleClick}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Awesome, now we’re headed somewhere ! Let us also rewrite our parent component to consume the new ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Awesome, now we’re headed somewhere ! Let us also rewrite our parent component to consume the new ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" hook.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" hook.","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"function DialogDemo() {\n  const { getConfirmation, Confirmation } = useConfirm();\n\n  const handleDelete = () => {\n    getConfirmation();\n  };\n  return;\n  <>\n    <Button onClick={handleDelete}>Delete</Button>\n    <Confirmation\n      title=\"Are you sure?\"\n      description=\"This action is permanent. You cannot undo this action.\"\n      confirmLabel=\"Delete Account\"\n    />\n  </>;\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"function DialogDemo() {\n  const { getConfirmation, Confirmation } = useConfirm();\n\n  const handleDelete = () => {\n    getConfirmation();\n  };\n  return;\n  <>\n    <Button onClick={handleDelete}>Delete</Button>\n    <Confirmation\n      title=\"Are you sure?\"\n      description=\"This action is permanent. You cannot undo this action.\"\n      confirmLabel=\"Delete Account\"\n    />\n  </>;\n}","href":null}],"language":"typescript"},{"type":"heading_2","content":[{"type":"text","text":{"content":"Promisifying the function","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Promisifying the function","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The last part of this implementation, the meat and potatoes of this problem involves awaiting on the dialog. This involves using a promise that should start when the function is called and is only resolved when either the confirm or cancellation button is clicked. If you’ve only consumed promises and not really created your own promise, now is a great time to read up on how a promise actually works. Here in the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The last part of this implementation, the meat and potatoes of this problem involves awaiting on the dialog. This involves using a promise that should start when the function is called and is only resolved when either the confirm or cancellation button is clicked. If you’ve only consumed promises and not really created your own promise, now is a great time to read up on how a promise actually works. Here in the ","href":null},{"type":"text","text":{"content":"MDN article","link":{"url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"MDN article","href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here is what the skeleton of a promise looks like","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here is what the skeleton of a promise looks like","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"//If you're using typescript, casting the promise as a boolean allows the\n//typechecker to know that the result of the promise will be a boolean\n\nconst isEven = (n: number) =>\n  new Promise() <\n  boolean >\n  ((resolve, reject) => {\n    /* If the promise cannot be completed, reject with a response \n\t\t\t that can be caught with error handling\n\t\t*/\n    if (typeof n !== \"number\") {\n      reject(\"invalid input type\");\n    }\n\n    // Execute the code within the promise\n    const result = n % 2 === 0;\n    /* Resolve with the result which will be accessible after the promise is \n\t\tawaited */\n    resolve(result);\n  });\n\nconst isFiveEven = await isEven(5);\n//isFiveEven results in false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"//If you're using typescript, casting the promise as a boolean allows the\n//typechecker to know that the result of the promise will be a boolean\n\nconst isEven = (n: number) =>\n  new Promise() <\n  boolean >\n  ((resolve, reject) => {\n    /* If the promise cannot be completed, reject with a response \n\t\t\t that can be caught with error handling\n\t\t*/\n    if (typeof n !== \"number\") {\n      reject(\"invalid input type\");\n    }\n\n    // Execute the code within the promise\n    const result = n % 2 === 0;\n    /* Resolve with the result which will be accessible after the promise is \n\t\tawaited */\n    resolve(result);\n  });\n\nconst isFiveEven = await isEven(5);\n//isFiveEven results in false","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Notice how resolver and rejector parameters are only available within the scope of the executor function that is passed into the promise. This is a problem in the context of the confirmation dialog, since this promise should only be resolved upon user action. For example","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notice how resolver and rejector parameters are only available within the scope of the executor function that is passed into the promise. This is a problem in the context of the confirmation dialog, since this promise should only be resolved upon user action. For example","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((resolve) => {\n    //Only call resolve when the user clicks on a button.\n  });\n  return promise;\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((resolve) => {\n    //Only call resolve when the user clicks on a button.\n  });\n  return promise;\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"This means that the resolver needs to be accessible outside of the promise itself and here we use React’s ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This means that the resolver needs to be accessible outside of the promise itself and here we use React’s ","href":null},{"type":"text","text":{"content":"useRef","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useRef","href":null},{"type":"text","text":{"content":" hook to leverage this. When the promise is created, we assign the resolver to the ref. Then, when the user clicks on the confirmation or cancellation, we can use the ref to resolve the promise appropriately.  ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" hook to leverage this. When the promise is created, we assign the resolver to the ref. Then, when the user clicks on the confirmation or cancellation, we can use the ref to resolve the promise appropriately.  ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const resolver = useRef<null | ((value: boolean) => void)>(null);\nconst [open, setOpen] = useState(false);\n\nconst getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((r) => {\n    resolver.current = r;\n  });\n  return promise;\n};\n\nconst handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\nconst handleConfirm = () => handleClick(true);\nconst handleCancel = () => handleClick(false);","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const resolver = useRef<null | ((value: boolean) => void)>(null);\nconst [open, setOpen] = useState(false);\n\nconst getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((r) => {\n    resolver.current = r;\n  });\n  return promise;\n};\n\nconst handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\nconst handleConfirm = () => handleClick(true);\nconst handleCancel = () => handleClick(false);","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Awesome ! Let’s add this to our ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Awesome ! Let’s add this to our ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" to promisify awaiting on the dialog for user input. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to promisify awaiting on the dialog for user input. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useRef, useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n  const resolver = useRef<null | ((value: boolean) => void)>(null);\n\n  const getConfirmation = () => {\n    setOpen(true);\n    const promise = new Promise<boolean>((r) => {\n      resolver.current = r;\n    });\n    return promise;\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\n  const handleConfirm = () => handleClick(true);\n  const handleCancel = () => handleClick(false);\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleCancel}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirm}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useRef, useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n  const resolver = useRef<null | ((value: boolean) => void)>(null);\n\n  const getConfirmation = () => {\n    setOpen(true);\n    const promise = new Promise<boolean>((r) => {\n      resolver.current = r;\n    });\n    return promise;\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\n  const handleConfirm = () => handleClick(true);\n  const handleCancel = () => handleClick(false);\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleCancel}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirm}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"And now, it’s finally time to consume our custom hook. Here is how that could look like","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"And now, it’s finally time to consume our custom hook. Here is how that could look like","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useConfirm } from \"./useConfirm\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\nexport function DialogDemo() {\n  const { Confirmation, getConfirmation } = useConfirm();\n  const { toast } = useToast();\n\n  const handleDeleteAccount = async () => {\n    const result = await getConfirmation();\n    if (result === true) {\n      toast({\n        title: \"Account deleted\",\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Phew, that was close!\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={handleDeleteAccount}>Delete Account</Button>\n      <Confirmation\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n      />\n      <Toaster />\n    </>\n  );\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { Button } from \"@/components/ui/button\";\nimport { useConfirm } from \"./useConfirm\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\nexport function DialogDemo() {\n  const { Confirmation, getConfirmation } = useConfirm();\n  const { toast } = useToast();\n\n  const handleDeleteAccount = async () => {\n    const result = await getConfirmation();\n    if (result === true) {\n      toast({\n        title: \"Account deleted\",\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Phew, that was close!\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={handleDeleteAccount}>Delete Account</Button>\n      <Confirmation\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n      />\n      <Toaster />\n    </>\n  );\n}","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"I love how much cleaner this implementation is. The messy visual state logic is abstracted away, and the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I love how much cleaner this implementation is. The messy visual state logic is abstracted away, and the ","href":null},{"type":"text","text":{"content":"handleDeleteAccount","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"handleDeleteAccount","href":null},{"type":"text","text":{"content":" clearly shows what is happening. First we’re waiting on the confirmation and depending on the confirmation the corresponding toast is shown !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" clearly shows what is happening. First we’re waiting on the confirmation and depending on the confirmation the corresponding toast is shown !","href":null}]},{"type":"paragraph","content":[]}],"slug":"async-confirm","page_id":"558b8cf8-cd42-482a-9189-749cf0c529a9","title":"Designing an Async Confirmation Dialog ","description":"Making an Async confirmation dialog with react","skills":["React","Typescript"],"cover":"https://images.unsplash.com/photo-1577563908411-5077b6dc7624?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2023-08-30","published":true}},{"params":{"slug":"my-website"},"props":{"blocks":[{"type":"heading_1","content":[{"type":"text","text":{"content":"Feature List","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Feature List","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Static Pages served from the Vercel edge network with 0.8 seconds to interactivity","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Static Pages served from the Vercel edge network with 0.8 seconds to interactivity","href":null}],[{"type":"text","text":{"content":"Notion as a content management system (CMS)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion as a content management system (CMS)","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I’ve used a variety of content management systems in the past such as Joomla, Wordpress and Wix. However, I never ended using one consistently to keep my website upto date with new content. I discovered that the core problem was that their tools were un-intuitiveas it forced me out of my workflow to do something simple, such as updating a post. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I’ve used a variety of content management systems in the past such as Joomla, Wordpress and Wix. However, I never ended using one consistently to keep my website upto date with new content. I discovered that the core problem was that their tools were un-intuitiveas it forced me out of my workflow to do something simple, such as updating a post. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A few years ago, I integrated Notion into my workflow where I used it to take class notes, journal and work on personal projects. The reason why myself and the rest of the Notion Cult loves using it is that it simplifies our workflows and provides a hierarchical structure to all our documents - while ensuring that it is all catalouged. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A few years ago, I integrated Notion into my workflow where I used it to take class notes, journal and work on personal projects. The reason why myself and the rest of the Notion Cult loves using it is that it simplifies our workflows and provides a hierarchical structure to all our documents - while ensuring that it is all catalouged. ","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"The Notion cult","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The Notion cult","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"When I bought my domain, I wanted to use a CMS which required the least friction to upload content. I discovered a free tool, ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"When I bought my domain, I wanted to use a CMS which required the least friction to upload content. I discovered a free tool, ","href":null},{"type":"text","text":{"content":"Fruition","link":{"url":"https://fruitionsite.com/771ef38657244c27b9389734a9cbff44"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Fruition","href":"https://fruitionsite.com/771ef38657244c27b9389734a9cbff44"},{"type":"text","text":{"content":" which enabled me to serve my notion page via my domain. Fruition uses a Cloudflare JavaScript worker to display all the contents of the notion site but with the routing was decoupled from the notion domain. So instead of ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" which enabled me to serve my notion page via my domain. Fruition uses a Cloudflare JavaScript worker to display all the contents of the notion site but with the routing was decoupled from the notion domain. So instead of ","href":null},{"type":"text","text":{"content":"https://www.notion.so/devinda/This-Website-361e85f3bef14f1aa4c8ba60ae4b4c88","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"https://www.notion.so/devinda/This-Website-361e85f3bef14f1aa4c8ba60ae4b4c88","href":null},{"type":"text","text":{"content":" , the URL bar would display ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" , the URL bar would display ","href":null},{"type":"text","text":{"content":"devinda.me/This-Website","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"devinda.me/This-Website","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This setup (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This setup (","href":null},{"type":"text","text":{"content":"visit the old site","link":{"url":"http://website.devinda.me/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"visit the old site","href":"http://website.devinda.me/"},{"type":"text","text":{"content":") worked for a few years but there were a few issues that accumulated which ultimately led me to building this site. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":") worked for a few years but there were a few issues that accumulated which ultimately led me to building this site. ","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Long load times - The JavaScript worker just took too long to display my site, sometimes over 30 seconds for complete page render","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Long load times - The JavaScript worker just took too long to display my site, sometimes over 30 seconds for complete page render","href":null}],[{"type":"text","text":{"content":"Poor customization - I wasn’t able to place blocks exactly where I wanted them or have finer control of the information displayed","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Poor customization - I wasn’t able to place blocks exactly where I wanted them or have finer control of the information displayed","href":null}],[{"type":"text","text":{"content":"Potential for breakage - Changes by the Notion team sometimes broke the JavaScript worker which would require me waiting till the Fruition script was fixed","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Potential for breakage - Changes by the Notion team sometimes broke the JavaScript worker which would require me waiting till the Fruition script was fixed","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Sketching on Figma","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sketching on Figma","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here are some of my initial project designs from Figma. I’ve been studying UX design, and in this project I used ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here are some of my initial project designs from Figma. I’ve been studying UX design, and in this project I used ","href":null},{"type":"text","text":{"content":"Design Thinking","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Design Thinking","href":null},{"type":"text","text":{"content":". This is an iterative process where I design a feature and then build it before moving onto the next feature. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". This is an iterative process where I design a feature and then build it before moving onto the next feature. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Research","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Research","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Going into this project, I wanted to explore other implementations of Next.JS and the Notion API. I needed a project that uses the newly released official Notion API and I found these two projects -","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Going into this project, I wanted to explore other implementations of Next.JS and the Notion API. I needed a project that uses the newly released official Notion API and I found these two projects -","href":null}]},{"type":"numbered_list_item","content":[[{"type":"mention","mention":{"type":"link_preview","link_preview":{"url":"https://github.com/samuelkraft/notion-blog-nextjs"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/samuelkraft/notion-blog-nextjs","href":"https://github.com/samuelkraft/notion-blog-nextjs"}],[{"type":"mention","mention":{"type":"link_preview","link_preview":{"url":"https://github.com/sven10hove/The-publisher-framework"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/sven10hove/The-publisher-framework","href":"https://github.com/sven10hove/The-publisher-framework"}]]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I then inspected their code to be inspired by their implementation architecture and understand how they were transforming content from the Notion API to website components. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I then inspected their code to be inspired by their implementation architecture and understand how they were transforming content from the Notion API to website components. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Creating Pages","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Creating Pages","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"/index","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/index","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The most challenging part of this page was ensuring that my name was properly displayed on different devices. The length of my last name meant that work was concentrated here to ensure that the responsiveness and image gradient looks correct across devices. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The most challenging part of this page was ensuring that my name was properly displayed on different devices. The length of my last name meant that work was concentrated here to ensure that the responsiveness and image gradient looks correct across devices. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Show homepage on different devices.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Show homepage on different devices.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Next.JS + Vercel has a different approach to implementing images which optimizes the load time of images. I noticed that with my default settings, the images would take too long to load. This meant that I had to do a bit of iterative tweaking to discover how to show images correctly on the card components. This involved playing around with the width and height attributes along with image sizing until I found a fitting compromise between the image size, resolution and download speed. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Next.JS + Vercel has a different approach to implementing images which optimizes the load time of images. I noticed that with my default settings, the images would take too long to load. This meant that I had to do a bit of iterative tweaking to discover how to show images correctly on the card components. This involved playing around with the width and height attributes along with image sizing until I found a fitting compromise between the image size, resolution and download speed. ","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"/projects/[slug]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/projects/[slug]","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I had to create my own API transformer that could convert JSON objects from the Notion API to React components while ensuring it was styled properly with Chakra UI. I built the transformer with a minimalist approach - implement the least required to create a functional project page. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I had to create my own API transformer that could convert JSON objects from the Notion API to React components while ensuring it was styled properly with Chakra UI. I built the transformer with a minimalist approach - implement the least required to create a functional project page. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The first components were quite straight forward to implement - headings, paragraphs and images.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The first components were quite straight forward to implement - headings, paragraphs and images.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Lists were a problem since the API did not mention when a list started or ended. Here I realized that I needed to create my own Typescript types which could map the JSON objects to my internal representation. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lists were a problem since the API did not mention when a list started or ended. Here I realized that I needed to create my own Typescript types which could map the JSON objects to my internal representation. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Likewise, inline text formatting and image captions were blocking points which I solved via my ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Likewise, inline text formatting and image captions were blocking points which I solved via my ","href":null},{"type":"text","text":{"content":"own types","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"own types","href":null},{"type":"text","text":{"content":". With a definitive type in place for each of these complex blocks, it eliminated much of the logic needed to style the React components. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". With a definitive type in place for each of these complex blocks, it eliminated much of the logic needed to style the React components. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"As of now, this site supports","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"As of now, this site supports","href":null}]},{"type":"bulleted_list_item","content":[[{"type":"text","text":{"content":"Headings","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Headings","href":null}],[{"type":"text","text":{"content":"Paragraphs","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Paragraphs","href":null}],[{"type":"text","text":{"content":"Lists","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lists","href":null}],[{"type":"text","text":{"content":"Images and captions","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Images and captions","href":null}],[{"type":"text","text":{"content":"Inline formatting","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Inline formatting","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Notion API Integration","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion API Integration","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"For this project, I’m using the official Notion API. While it just recently came off beta, the typescript support was quite poor which was why I had to implement my own private types. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For this project, I’m using the official Notion API. While it just recently came off beta, the typescript support was quite poor which was why I had to implement my own private types. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Infrastructure image","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Infrastructure image","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"My notion pages are being accessed via my private ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"My notion pages are being accessed via my private ","href":null},{"type":"text","text":{"content":"integration","link":{"url":"https://www.notion.so/my-integrations"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"integration","href":"https://www.notion.so/my-integrations"},{"type":"text","text":{"content":" that allows me to access content ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" that allows me to access content ","href":null},{"type":"text","text":{"content":"without","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"without","href":null},{"type":"text","text":{"content":" having to make my notion document public. The integration is then consumed on the Vercel edge nodes to create and update the static pages.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" having to make my notion document public. The integration is then consumed on the Vercel edge nodes to create and update the static pages.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In order to improve the performance of the site and to achieve a better ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In order to improve the performance of the site and to achieve a better ","href":null},{"type":"text","text":{"content":"Lighhouse performance score","link":{"url":"https://web.dev/performance-scoring/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lighhouse performance score","href":"https://web.dev/performance-scoring/"},{"type":"text","text":{"content":", I implemented optimization options offered by Next.JS and Vercel","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", I implemented optimization options offered by Next.JS and Vercel","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Image Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Image Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A big problem was cumulative layout shift. This is when an image starts loading, the layout of the page will change. Content below the image will start shifting down distracting the user. When using the Image component, it is possible to specify the desired with and hight of the image to prevent this. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A big problem was cumulative layout shift. This is when an image starts loading, the layout of the page will change. Content below the image will start shifting down distracting the user. When using the Image component, it is possible to specify the desired with and hight of the image to prevent this. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"However, this means that there will be a large empty box while the image is loading. This was solved via blurred placeholderes that provide visual context while the actual image is loading. he cu","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"However, this means that there will be a large empty box while the image is loading. This was solved via blurred placeholderes that provide visual context while the actual image is loading. he cu","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"These images are hosted on cloudinary, which is a dedicated image cdn and is cached by image size on Vercel edge nodes. Since these images are cached by image size, only the most appropriatly ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"These images are hosted on cloudinary, which is a dedicated image cdn and is cached by image size on Vercel edge nodes. Since these images are cached by image size, only the most appropriatly ","href":null},{"type":"text","text":{"content":"sized ","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"sized ","href":null},{"type":"text","text":{"content":"image is downloaded. For example, while the original image has a resolution of 4k, when the web page is loaded on a mobile device, it only downloads a 360p sized image. As a mobile device would not benefit with a 4k sized image, this optimizations saves data for the end user and improves the downoad speed of the image.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"image is downloaded. For example, while the original image has a resolution of 4k, when the web page is loaded on a mobile device, it only downloads a 360p sized image. As a mobile device would not benefit with a 4k sized image, this optimizations saves data for the end user and improves the downoad speed of the image.","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Next.JS Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Next.JS Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Instead of the old website, where the request would go all the way to the notion servers to get content data, with this current website, pages are statically created (Static Generated Pages). The benefit is that, when visiting this page, only an HTML page needs to be served. The content does not need to be hydrated and this allows pages to be served at blazing speeds.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Instead of the old website, where the request would go all the way to the notion servers to get content data, with this current website, pages are statically created (Static Generated Pages). The benefit is that, when visiting this page, only an HTML page needs to be served. The content does not need to be hydrated and this allows pages to be served at blazing speeds.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Sometimes, page content needs to be updated after building the site. Instead of rebuilding the static pages every time, incremental static  regeneration is implemented. Every 60 seconds, Next.JS will check if the page content is different to what it currently is. If it is, it will rebuild just that page and serve it. With this implementation, a change on a notion document will be reflected on the website in under two minuites.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sometimes, page content needs to be updated after building the site. Instead of rebuilding the static pages every time, incremental static  regeneration is implemented. Every 60 seconds, Next.JS will check if the page content is different to what it currently is. If it is, it will rebuild just that page and serve it. With this implementation, a change on a notion document will be reflected on the website in under two minuites.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Image of old website and new websites light house score","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Image of old website and new websites light house score","href":null}]},{"type":"paragraph","content":[]}],"slug":"my-website","page_id":"361e85f3-bef1-4f1a-a4c8-ba60ae4b4c88","title":"My site with NextJS","description":"The process behind creating this website with NextJS","skills":["Next.js","Notion","Chakra UI"],"cover":"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&dl=glenn-carstens-peters-npxXWgQ33ZQ-unsplash.jpg","date":"2022-03-03","published":true}},{"params":{"slug":"hitchspots"},"props":{"blocks":[{"type":"heading_1","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The best hitchhiking resource to anyone, be it a veteran or a beginner is the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The best hitchhiking resource to anyone, be it a veteran or a beginner is the ","href":null},{"type":"text","text":{"content":"Hitchwiki","link":{"url":"http://hitchwiki.org/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Hitchwiki","href":"http://hitchwiki.org/"},{"type":"text","text":{"content":". Among the countless articles, explaining the ways to hitchhike safely to surviving in gas stations, the best is the Hitchwiki map. Over the years, countless hitchhikers have contributed to this map with locations they’ve hitched from. It was a great resource while hitchhiking as it would show nearby spots, or spots in cities im planning to go to and thus I could get dropped near that; it can hours to cross a city by foot so being dropped near a high traffic exit would give me the greatest chance of hitching a ride out. However, over the years, the map lost a bit of functionality (being unable to add new spots) and even wasn’t loading for a few months. One day, while I was browsing the wiki, I found a page that had an export dump of their entire database, containing all 25k hitchhiking spots, which was just around the time I was trying to get into mobile development and I was fishing around for a project. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". Among the countless articles, explaining the ways to hitchhike safely to surviving in gas stations, the best is the Hitchwiki map. Over the years, countless hitchhikers have contributed to this map with locations they’ve hitched from. It was a great resource while hitchhiking as it would show nearby spots, or spots in cities im planning to go to and thus I could get dropped near that; it can hours to cross a city by foot so being dropped near a high traffic exit would give me the greatest chance of hitching a ride out. However, over the years, the map lost a bit of functionality (being unable to add new spots) and even wasn’t loading for a few months. One day, while I was browsing the wiki, I found a page that had an export dump of their entire database, containing all 25k hitchhiking spots, which was just around the time I was trying to get into mobile development and I was fishing around for a project. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Why not make a mobile app for hitchwiki !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Why not make a mobile app for hitchwiki !","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Research","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Research","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I had dabbled a bit in React Native development with the Expo network. In retrospective, the framework felt slow to use and the load time for the software was terrible. The alternate choices I found were flutter and ionic. Making the choice for flutter was quite easy since the ionic framework simply renders JavaScript components meaning that the app would be really slow. On the other hand, Flutter is developed and maintained by Google and it rendered it's components to native components. This means that not only the app be faster but also there would be a ton of new support while learning this new framework","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I had dabbled a bit in React Native development with the Expo network. In retrospective, the framework felt slow to use and the load time for the software was terrible. The alternate choices I found were flutter and ionic. Making the choice for flutter was quite easy since the ionic framework simply renders JavaScript components meaning that the app would be really slow. On the other hand, Flutter is developed and maintained by Google and it rendered it's components to native components. This means that not only the app be faster but also there would be a ton of new support while learning this new framework","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Why not kotolin or swift ?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Why not kotolin or swift ?","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In recent years I had heard more about these cross platform frameworks and I was really excited to try out them first. This was also my first time developing for the mobile platform, so I didn't want to over complicate the developing environment, when everything else was so new. Being able to code for both an iOS device and a Android device sounded really amazing and I wanted to learn how flutter had made this possible, which made is easier to overlook some of the fine tuning you're able to do when coding in the platform’s native languages. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In recent years I had heard more about these cross platform frameworks and I was really excited to try out them first. This was also my first time developing for the mobile platform, so I didn't want to over complicate the developing environment, when everything else was so new. Being able to code for both an iOS device and a Android device sounded really amazing and I wanted to learn how flutter had made this possible, which made is easier to overlook some of the fine tuning you're able to do when coding in the platform’s native languages. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Design","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Design","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The entire design was inspired by Google Maps. I’ve been a huge fan of how google maps implements it’s review system and I wanted to emulate that. I took a few screenshots of google maps, copied it over to Figma and started work on how I wanted the layout to look. I spent most of my time here figuring out the information structure and tried to adhere to the Google Maps design as closely as possible. As a new designer, I wasn’t confident in making User Interfaces and so I figured I could replicate google maps and try to understand why it works. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The entire design was inspired by Google Maps. I’ve been a huge fan of how google maps implements it’s review system and I wanted to emulate that. I took a few screenshots of google maps, copied it over to Figma and started work on how I wanted the layout to look. I spent most of my time here figuring out the information structure and tried to adhere to the Google Maps design as closely as possible. As a new designer, I wasn’t confident in making User Interfaces and so I figured I could replicate google maps and try to understand why it works. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Development","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Development","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Having only had developed sample applications in flutter, this was my first time combining every thing I had learnt before to a single project. This is my favorite way of learning a project, since it requires you to creatively combine what you already have learnt and along the way, you discover unique problems that requires to be solved creatively. I started the development with the core functionalities in mind ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Having only had developed sample applications in flutter, this was my first time combining every thing I had learnt before to a single project. This is my favorite way of learning a project, since it requires you to creatively combine what you already have learnt and along the way, you discover unique problems that requires to be solved creatively. I started the development with the core functionalities in mind ","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Display a map with locations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Display a map with locations","href":null}],[{"type":"text","text":{"content":"Cluster locations together to reduce visual clutter","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cluster locations together to reduce visual clutter","href":null}],[{"type":"text","text":{"content":"Add locations to the map","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add locations to the map","href":null}],[{"type":"text","text":{"content":"Add reviews to these locations.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add reviews to these locations.","href":null}]]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Using Firebase as a back-end service, I didn’t have to write any code with databases or authentication. The 2nd party Firebase libraries would handle this for me, and I would write the logic around that, expressing how data was to be added and which pages were shown for authenticated users. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Using Firebase as a back-end service, I didn’t have to write any code with databases or authentication. The 2nd party Firebase libraries would handle this for me, and I would write the logic around that, expressing how data was to be added and which pages were shown for authenticated users. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"After the initial version, I shared it among a few users on the hitchhiking sub-reddit where they helped me discover some unique edge cases. As with developing for devices that have variable screen sizes, it turned out that some locations weren’t getting clustered properly. I fixed this by tweaking the numbers on the clustering algorithm such that only points within the screen were considered for clustering. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"After the initial version, I shared it among a few users on the hitchhiking sub-reddit where they helped me discover some unique edge cases. As with developing for devices that have variable screen sizes, it turned out that some locations weren’t getting clustered properly. I fixed this by tweaking the numbers on the clustering algorithm such that only points within the screen were considered for clustering. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In the next step of development, I focused on enhancing user functionality. I added a login feature such that while all users could view locations, only users that were logged in could contribute. This step required me to design a login flow that would allow a user to login in via google and set a display name. Most hitchhikers do not want their public names to be showcased and I understood that it would be better to ask them for a display name than extract it from their google account. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In the next step of development, I focused on enhancing user functionality. I added a login feature such that while all users could view locations, only users that were logged in could contribute. This step required me to design a login flow that would allow a user to login in via google and set a display name. Most hitchhikers do not want their public names to be showcased and I understood that it would be better to ask them for a display name than extract it from their google account. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"To polish up the app, I started to implement in Material animations. This is a great moment to talk about the material design kit. Developing for flutter, google has made it super easy to work with material by providing pre-built components that would be rendered natively. As a new designer, material was a great toolkit to understand the principles behind design. It would explain how and why to use components that I rarely had any doubt when creating this UI. These animations would sit inbet","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"To polish up the app, I started to implement in Material animations. This is a great moment to talk about the material design kit. Developing for flutter, google has made it super easy to work with material by providing pre-built components that would be rendered natively. As a new designer, material was a great toolkit to understand the principles behind design. It would explain how and why to use components that I rarely had any doubt when creating this UI. These animations would sit inbet","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Finally, I introduced an on-boarding process to help new users understand the core features of this app. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Finally, I introduced an on-boarding process to help new users understand the core features of this app. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"DevOps","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"DevOps","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"During the initial stages of development, I was using an emulator and my personal phone to side load the app. However, once I got to the initial alpha stage where I deployed it on the playstore, I soon understood how time consuming it was to assign the correct version no, build the app, upload it to the play store & finally publish it. To automate this entire step, i decided to use the power of github actions and fastlane to help automate these steps. With this, once I push my code to ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"During the initial stages of development, I was using an emulator and my personal phone to side load the app. However, once I got to the initial alpha stage where I deployed it on the playstore, I soon understood how time consuming it was to assign the correct version no, build the app, upload it to the play store & finally publish it. To automate this entire step, i decided to use the power of github actions and fastlane to help automate these steps. With this, once I push my code to ","href":null},{"type":"text","text":{"content":"main","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"main","href":null},{"type":"text","text":{"content":"and fastlane takes care of building, signing and uploading the app to the playstore. It will also create a new release in the alpha track. This allows me to review the release and publish it. Once I test the alpha version on my test devices and alpha testers, I merely have to push it to the release track and it is available to the public. With this, I was able to automate a step that usually took me close to an hour down to a single line of ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"and fastlane takes care of building, signing and uploading the app to the playstore. It will also create a new release in the alpha track. This allows me to review the release and publish it. Once I test the alpha version on my test devices and alpha testers, I merely have to push it to the release track and it is available to the public. With this, I was able to automate a step that usually took me close to an hour down to a single line of ","href":null},{"type":"text","text":{"content":"git push","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"git push","href":null},{"type":"text","text":{"content":".","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":".","href":null}]},{"type":"paragraph","content":[]}],"slug":"hitchspots","page_id":"69a3a6f4-3966-45b6-a8aa-d0fb365926d5","title":"Hitchspots","description":"Coffee, half and half, cup iced doppio kopi-luwak aftertaste sugar, medium caffeine, cappuccino.","skills":["Flutter","Firebase"],"cover":"https://images.unsplash.com/photo-1630163747141-8c5c26312c5a?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2022-02-13","published":true}}]