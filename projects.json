[{"params":{"slug":"making-kombucha-from-zero"},"props":{"blocks":[{"type":"paragraph","content":[{"type":"text","text":{"content":"This is how I brew 3.3 litres of kombucha. When I add my flavouring at the end, it will be around 4 litres of kombucha. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This is how I brew 3.3 litres of kombucha. When I add my flavouring at the end, it will be around 4 litres of kombucha. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Important Notes","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Important Notes","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"Cleanliness is really important to prevent contamination. Wash your equipment, wash your hands & wash your containers - sanitise them with boiling water if you can","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cleanliness is really important to prevent contamination. Wash your equipment, wash your hands & wash your containers - sanitise them with boiling water if you can","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"Use only a ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Use only a ","href":null},{"type":"text","text":{"content":"glass","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"glass","href":null},{"type":"text","text":{"content":" jar to make your scoby and then do your fermentation & bottle into ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" jar to make your scoby and then do your fermentation & bottle into ","href":null},{"type":"text","text":{"content":"glass","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"glass","href":null},{"type":"text","text":{"content":" bottles. They are non reactive & easy to sanitise. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" bottles. They are non reactive & easy to sanitise. ","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"Don’t mix hot water with any part of the kombucha process, this will kill your precious scoby !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Don’t mix hot water with any part of the kombucha process, this will kill your precious scoby !","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"1. Grow a Scoby","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1. Grow a Scoby","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"If you’ve a friend that makes their own kombucha, lucky you ! You can just ask them for a scoby, and skip this step. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"If you’ve a friend that makes their own kombucha, lucky you ! You can just ask them for a scoby, and skip this step. ","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"S","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"S","href":null},{"type":"text","text":{"content":"ymbiotic ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ymbiotic ","href":null},{"type":"text","text":{"content":"C","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"C","href":null},{"type":"text","text":{"content":"ulture ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ulture ","href":null},{"type":"text","text":{"content":"O","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"O","href":null},{"type":"text","text":{"content":"f ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"f ","href":null},{"type":"text","text":{"content":"B","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"B","href":null},{"type":"text","text":{"content":"acteria and ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"acteria and ","href":null},{"type":"text","text":{"content":"Y","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Y","href":null},{"type":"text","text":{"content":"east - a friend that consumes tea and sugar to make kombucha and carbon dioxide","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"east - a friend that consumes tea and sugar to make kombucha and carbon dioxide","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Ingredients","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ingredients","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Raw (Unpasteurised) & unflavoured store bought kombucha. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Raw (Unpasteurised) & unflavoured store bought kombucha. ","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Black tea, tea bags 3-4 teabags or 3-4 teaspoons of loose leaf","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Black tea, tea bags 3-4 teabags or 3-4 teaspoons of loose leaf","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Sugar 1/2 cup ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sugar 1/2 cup ","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Filtered water 7 cups","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Filtered water 7 cups","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Equipment","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Equipment","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Glass jar with a wide mouth (the scoby grows as wide as the mouth)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Glass jar with a wide mouth (the scoby grows as wide as the mouth)","href":null}]},{"type":"paragraph","content":[]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Wash your glass jar thoroughly to disinfect it","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Wash your glass jar thoroughly to disinfect it","href":null}],[{"type":"text","text":{"content":"Boil the 2-3 cups of water and steep the tea for about 10 mins","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Boil the 2-3 cups of water and steep the tea for about 10 mins","href":null}],[{"type":"text","text":{"content":"Add the sugar","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add the sugar","href":null}],[{"type":"text","text":{"content":"Let the tea cooldown to room temperature","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let the tea cooldown to room temperature","href":null}],[{"type":"text","text":{"content":"Add your tea, store bought kombucha & the rest of the water to the jar","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add your tea, store bought kombucha & the rest of the water to the jar","href":null}],[{"type":"text","text":{"content":"Cover it with a clean cloth and keep it in place with a rubber band","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cover it with a clean cloth and keep it in place with a rubber band","href":null}],[{"type":"text","text":{"content":"Keep it in a place away from direct sunlight but with good airflow","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Keep it in a place away from direct sunlight but with good airflow","href":null}]]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"Initial growth after 2 days","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Initial growth after 2 days","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"callout","content":[{"type":"text","text":{"content":"The time it takes for your scoby to grow depends on your climate. Here in Sri Lanka, it took me just about a week to get this thick fella. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The time it takes for your scoby to grow depends on your climate. Here in Sri Lanka, it took me just about a week to get this thick fella. ","href":null}]},{"type":"unknown","content":"column_list"},{"type":"heading_1","content":[{"type":"text","text":{"content":"2. First Fermentation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"2. First Fermentation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This is where we actually make our kombucha. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This is where we actually make our kombucha. ","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Ingredients","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ingredients","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Tea, 2-3 tablespoons of tea, 8 bags of tea","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Tea, 2-3 tablespoons of tea, 8 bags of tea","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Filtered Water, 3.3 litres","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Filtered Water, 3.3 litres","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Sugar, 1 cup","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sugar, 1 cup","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Scoby","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Scoby","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Starter tea (2 cup of tea from the jar the scoby was growing in)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Starter tea (2 cup of tea from the jar the scoby was growing in)","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Equipment","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Equipment","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Large jar (mine held about 4 litres of water)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Large jar (mine held about 4 litres of water)","href":null}]},{"type":"paragraph","content":[]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Boil 2-3 cups of water, add the sugar and steep your tea in it. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Boil 2-3 cups of water, add the sugar and steep your tea in it. ","href":null}],[{"type":"text","text":{"content":"Let it cool down to room temperature","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let it cool down to room temperature","href":null}],[{"type":"text","text":{"content":"Combine the brewed tea, 2 cups of starter tea and the rest of the water in your jar","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Combine the brewed tea, 2 cups of starter tea and the rest of the water in your jar","href":null}],[{"type":"text","text":{"content":"Cover it with a clean cloth and secure it with a rubber band","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cover it with a clean cloth and secure it with a rubber band","href":null}]]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"Ready to start the first fermentation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ready to start the first fermentation","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"callout","content":[{"type":"text","text":{"content":"Taste it every few days till you find your perfect tart to sweet balance. Mine takes about a week","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Taste it every few days till you find your perfect tart to sweet balance. Mine takes about a week","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"3. Second Fermentation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"3. Second Fermentation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This is where we add some flavour, so think about what flavours you want while you wait on your first fermentation. Here are some popular ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This is where we add some flavour, so think about what flavours you want while you wait on your first fermentation. Here are some popular ","href":null},{"type":"text","text":{"content":"flavours","link":{"url":"https://brewbuch.com/top-kombucha-flavors/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"flavours","href":"https://brewbuch.com/top-kombucha-flavors/"},{"type":"text","text":{"content":". You can either flavor everything the same, or have a different flavour per bottle. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". You can either flavor everything the same, or have a different flavour per bottle. ","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"For the bottles, flip top bottles are the best, but any glass bottle should work.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For the bottles, flip top bottles are the best, but any glass bottle should work.","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Ingredients","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ingredients","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Fruit pulp, around 150 - 250 ml per bottle. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Fruit pulp, around 150 - 250 ml per bottle. ","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"Kombucha","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Kombucha","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"4 tablespoons of sugar, 1 tablespoon per bottle","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"4 tablespoons of sugar, 1 tablespoon per bottle","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Equipment","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Equipment","href":null}]},{"type":"to_do","content":[{"type":"text","text":{"content":"4 x 1 litre Flip-top bottles","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"4 x 1 litre Flip-top bottles","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Add your fruit juice or pulp to the bottle.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add your fruit juice or pulp to the bottle.","href":null}],[{"type":"text","text":{"content":"Fill it up with kombucha to the neck of the bottle - this leaves space for the carbon dioxide to build up and lower the risk of your bottles exploding","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Fill it up with kombucha to the neck of the bottle - this leaves space for the carbon dioxide to build up and lower the risk of your bottles exploding","href":null}],[{"type":"text","text":{"content":"Add up to a tablespoon of sugar - your friendly bacteria will eat it, produce carbon dioxide and naturally carbonate your kombucha. Change the amount of sugar, to control how fizzy you want your kombucha to be.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add up to a tablespoon of sugar - your friendly bacteria will eat it, produce carbon dioxide and naturally carbonate your kombucha. Change the amount of sugar, to control how fizzy you want your kombucha to be.","href":null}],[{"type":"text","text":{"content":"Ferment up to a week in a dark place at room temperature.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ferment up to a week in a dark place at room temperature.","href":null}],[{"type":"text","text":{"content":"Burp the bottles on the first few days - this allows the flavour to keep developing for a bit longer while ensuring your bottles won’t explode","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Burp the bottles on the first few days - this allows the flavour to keep developing for a bit longer while ensuring your bottles won’t explode","href":null}]]},{"type":"callout","content":[{"type":"text","text":{"content":"Consider keeping your bottles inside a cardboard box, on inside a cupboard, so that even if your bottles explode, the mess will be contained. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Consider keeping your bottles inside a cardboard box, on inside a cupboard, so that even if your bottles explode, the mess will be contained. ","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"For this batch, I chose pineapple, pineapple + mint, lime + mint & strawberry","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For this batch, I chose pineapple, pineapple + mint, lime + mint & strawberry","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"heading_1","content":[{"type":"text","text":{"content":"4. Enjoy","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"4. Enjoy","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Around 7 days in, your kombucha should be ready to enjoy. Leave your bottles in a fridge overnight, to completely chill. This slows down the fermentation process, so you will be able to enjoy it for longer without worrying about the kombucha turning vinegary or your bottles exploding !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Around 7 days in, your kombucha should be ready to enjoy. Leave your bottles in a fridge overnight, to completely chill. This slows down the fermentation process, so you will be able to enjoy it for longer without worrying about the kombucha turning vinegary or your bottles exploding !","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"When opening, place a bowl underneath it to contain any kombucha that overflows. Then hold a cup upside down over the mouth of the bottle. This way, even if your kombucha is extra fizzy and wants to spray everywhere, you won’t waste away any of your delicious beverage. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"When opening, place a bowl underneath it to contain any kombucha that overflows. Then hold a cup upside down over the mouth of the bottle. This way, even if your kombucha is extra fizzy and wants to spray everywhere, you won’t waste away any of your delicious beverage. ","href":null}]},{"type":"paragraph","content":[]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}}],"slug":"making-kombucha-from-zero","page_id":"11879b5b-d2da-80f6-a8c2-e0471971947f","title":"Making Kombucha from Zero","description":"Simple guide to making your own kombucha","skills":[],"cover":"https://images.unsplash.com/photo-1583396216852-1e1d61137170?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2024-10-07","published":true}},{"params":{"slug":"number-t"},"props":{"blocks":[{"type":"paragraph","content":[{"type":"text","text":{"content":"Write something here","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Write something here","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"https://images.unsplash.com/photo-1460186136353-977e9d6085a1?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=4800","link":{"url":"https://images.unsplash.com/photo-1460186136353-977e9d6085a1?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=4800"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://images.unsplash.com/photo-1460186136353-977e9d6085a1?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=4800","href":"https://images.unsplash.com/photo-1460186136353-977e9d6085a1?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=4800"}]},{"type":"paragraph","content":[]}],"slug":"number-t","page_id":"4ac69e34-2bde-44a0-aea3-f835594a1a7f","title":"Is it an Integer ? ","description":"How do you check if a number is an integer ? Solution to Typescript challenge 10969","skills":["Typescript"],"cover":"https://images.unsplash.com/photo-1460186136353-977e9d6085a1?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2024-08-15","published":false}},{"params":{"slug":"what-even-is-equality"},"props":{"blocks":[{"type":"unknown","content":"child_page"},{"type":"unknown","content":"child_page"},{"type":"paragraph","content":[{"type":"text","text":{"content":"If you were given two types, A & B, how would to verify if these were the same type or not ? In other words, how would you implement this function -","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"If you were given two types, A & B, how would to verify if these were the same type or not ? In other words, how would you implement this function -","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"type isEqual<A,B> = 'If A = B' ? true : false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type isEqual<A,B> = 'If A = B' ? true : false","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s start by questioning what it means to state that two types are equal. Before formalising a definition, running through some examples of the desired outcome should help paint a picture","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s start by questioning what it means to state that two types are equal. Before formalising a definition, running through some examples of the desired outcome should help paint a picture","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"type A = isEqual<string, string>;\n//^? true\n\ntype B = isEqual<string, \"hello\">;\n//^? false\n\ntype C = isEqual<string, number>;\n//^? false\n\ntype D = isEqual<{ hello: \"world\" }, { hello: \"world\" }>;\n//^? true\n\ntype E = isEqual<true | false, boolean>;\n//^? true\n\ntype MyType1 = 1 | 2 | 3;\ntype MyType2 = 2 | 3 | 1;\n\ntype F = isEqual<MyType1, MyType2>;\n//^? true\n\ntype MyType3 = 1 | 2 | 3 | 4\n\ntype G = isEqual<MyType1, MyType3>;\n//^? false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type A = isEqual<string, string>;\n//^? true\n\ntype B = isEqual<string, \"hello\">;\n//^? false\n\ntype C = isEqual<string, number>;\n//^? false\n\ntype D = isEqual<{ hello: \"world\" }, { hello: \"world\" }>;\n//^? true\n\ntype E = isEqual<true | false, boolean>;\n//^? true\n\ntype MyType1 = 1 | 2 | 3;\ntype MyType2 = 2 | 3 | 1;\n\ntype F = isEqual<MyType1, MyType2>;\n//^? true\n\ntype MyType3 = 1 | 2 | 3 | 4\n\ntype G = isEqual<MyType1, MyType3>;\n//^? false","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here we can see that it’s only when the exact same type is used or when the two parameters have the exact same elements does ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here we can see that it’s only when the exact same type is used or when the two parameters have the exact same elements does ","href":null},{"type":"text","text":{"content":"isEqual","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"isEqual","href":null},{"type":"text","text":{"content":" return true. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" return true. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The reason behind could be understood better if we view types as sets from mathematics. In mathematics, sets are a collection of distinct objects that form a group. Two sets are equal when they have the same cardinality (count of elements) and equal elements","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The reason behind could be understood better if we view types as sets from mathematics. In mathematics, sets are a collection of distinct objects that form a group. Two sets are equal when they have the same cardinality (count of elements) and equal elements","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Set Theory Primer","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Set Theory Primer","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Sets","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sets","href":null},{"type":"text","text":{"content":" are a collection of distinct objects that make up a group. The items of a set are its ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" are a collection of distinct objects that make up a group. The items of a set are its ","href":null},{"type":"text","text":{"content":"elements","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"elements","href":null},{"type":"text","text":{"content":". A ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". A ","href":null},{"type":"text","text":{"content":"Finite set","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Finite set","href":null},{"type":"text","text":{"content":" has a limited number of items, i.e a set of all positive integers less that 5 is ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" has a limited number of items, i.e a set of all positive integers less that 5 is ","href":null},{"type":"text","text":{"content":"A = {1,2,3,4}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"A = {1,2,3,4}","href":null},{"type":"text","text":{"content":". An ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". An ","href":null},{"type":"text","text":{"content":"Infinite set ","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Infinite set ","href":null},{"type":"text","text":{"content":"has no limit on its elements, i.e a set of all positive integers is ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"has no limit on its elements, i.e a set of all positive integers is ","href":null},{"type":"text","text":{"content":"A = {1,2,3,4 ...}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"A = {1,2,3,4 ...}","href":null},{"type":"text","text":{"content":". ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". ","href":null},{"type":"text","text":{"content":"Equal sets ","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Equal sets ","href":null},{"type":"text","text":{"content":"are a pair of sets that have the same count of elements and equal elements, i.e if ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"are a pair of sets that have the same count of elements and equal elements, i.e if ","href":null},{"type":"text","text":{"content":"A = {1, 2, 3, 4, 5}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"A = {1, 2, 3, 4, 5}","href":null},{"type":"text","text":{"content":" and ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" and ","href":null},{"type":"text","text":{"content":"B = {1, 2, 3, 4, 5}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"B = {1, 2, 3, 4, 5}","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"A = B","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"A = B","href":null},{"type":"text","text":{"content":" ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ","href":null}]},{"type":"quote","content":[{"type":"text","text":{"content":"The above is paraphrased from ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The above is paraphrased from ","href":null},{"type":"text","text":{"content":"https://www.cuemath.com/algebra/sets/","link":{"url":"https://www.cuemath.com/algebra/sets/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://www.cuemath.com/algebra/sets/","href":"https://www.cuemath.com/algebra/sets/"}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Types as sets","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Types as sets","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s take the type definition of boolean and look at it as a set. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s take the type definition of boolean and look at it as a set. ","href":null}]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"This set consists of two elements, true and false. Written in set notation, this would be ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This set consists of two elements, true and false. Written in set notation, this would be ","href":null},{"type":"text","text":{"content":"boolean = { true, false }","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"boolean = { true, false }","href":null},{"type":"text","text":{"content":". This is a ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". This is a ","href":null},{"type":"text","text":{"content":"finite","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"finite","href":null},{"type":"text","text":{"content":" set, since the only elements are true and false. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" set, since the only elements are true and false. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Translated to typescript-land, we could say that boolean is a ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Translated to typescript-land, we could say that boolean is a ","href":null},{"type":"text","text":{"content":"general type","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"general type","href":null},{"type":"text","text":{"content":" made of two ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" made of two ","href":null},{"type":"text","text":{"content":"literals types","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"literals types","href":null},{"type":"text","text":{"content":", true and false. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", true and false. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"What is a type literal ? From the perspective of sets, imagine literals as the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"What is a type literal ? From the perspective of sets, imagine literals as the ","href":null},{"type":"text","text":{"content":"elements","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"elements","href":null},{"type":"text","text":{"content":" of typescript. They are the most unit form of types which come together to make all other types. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" of typescript. They are the most unit form of types which come together to make all other types. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here are the three primitive general types, ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here are the three primitive general types, ","href":null},{"type":"text","text":{"content":"string","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"boolean","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"boolean","href":null},{"type":"text","text":{"content":" and ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" and ","href":null},{"type":"text","text":{"content":"number","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"number","href":null},{"type":"text","text":{"content":" represented as sets.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" represented as sets.","href":null}]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"While ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"While ","href":null},{"type":"text","text":{"content":"boolean","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"boolean","href":null},{"type":"text","text":{"content":" is a finite set, ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" is a finite set, ","href":null},{"type":"text","text":{"content":"string","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string","href":null},{"type":"text","text":{"content":" and ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" and ","href":null},{"type":"text","text":{"content":"number","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"number","href":null},{"type":"text","text":{"content":" are ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" are ","href":null},{"type":"text","text":{"content":"infinite","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"infinite","href":null},{"type":"text","text":{"content":" sets. In other words, the type ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" sets. In other words, the type ","href":null},{"type":"text","text":{"content":"string","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string","href":null},{"type":"text","text":{"content":" which is comprised of all the string literals possible - be it your name or ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" which is comprised of all the string literals possible - be it your name or ","href":null},{"type":"text","text":{"content":"hello world","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"hello world","href":null},{"type":"text","text":{"content":". In a similar manner, the type ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". In a similar manner, the type ","href":null},{"type":"text","text":{"content":"number","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"number","href":null},{"type":"text","text":{"content":" is made up of all numbers. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" is made up of all numbers. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In practice, most of the times, we want to know if an element is part of a set. For example, is a given element, part of the string set ? Translated from sets to types, we could rephrase this as, is a given type ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In practice, most of the times, we want to know if an element is part of a set. For example, is a given element, part of the string set ? Translated from sets to types, we could rephrase this as, is a given type ","href":null},{"type":"text","text":{"content":"assignable ","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"assignable ","href":null},{"type":"text","text":{"content":"to the general type ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"to the general type ","href":null},{"type":"text","text":{"content":"string","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string","href":null},{"type":"text","text":{"content":" ?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ?","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Objective","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Objective","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The goal is to create a condition that checks if two types are the same, for all possible types. To define the problem more clearly, here are the all the types possible.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The goal is to create a condition that checks if two types are the same, for all possible types. To define the problem more clearly, here are the all the types possible.","href":null}]},{"type":"bulleted_list_item","content":[[{"type":"text","text":{"content":"String literals (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"String literals (","href":null},{"type":"text","text":{"content":"hello","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"hello","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"world","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"world","href":null},{"type":"text","text":{"content":")","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":")","href":null}],[{"type":"text","text":{"content":"Number literals (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Number literals (","href":null},{"type":"text","text":{"content":"1","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"1","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"100","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"100","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"1000","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"1000","href":null},{"type":"text","text":{"content":")","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":")","href":null}],[{"type":"text","text":{"content":"Boolean literals (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Boolean literals (","href":null},{"type":"text","text":{"content":"true","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"true","href":null},{"type":"text","text":{"content":" and ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" and ","href":null},{"type":"text","text":{"content":"false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"false","href":null},{"type":"text","text":{"content":")","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":")","href":null}],[{"type":"text","text":{"content":"Object types (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Object types (","href":null},{"type":"text","text":{"content":"{a: true}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"{a: true}","href":null},{"type":"text","text":{"content":", ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", ","href":null},{"type":"text","text":{"content":"{b: false}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"{b: false}","href":null},{"type":"text","text":{"content":")","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":")","href":null}],[{"type":"text","text":{"content":"object","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"object","href":null}],[{"type":"text","text":{"content":"What about record: any ?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"What about record: any ?","href":null}],[{"type":"text","text":{"content":"string","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"string","href":null}],[{"type":"text","text":{"content":"number","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"number","href":null}],[{"type":"text","text":{"content":"boolean","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"boolean","href":null}],[{"type":"text","text":{"content":"Function (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Function (","href":null},{"type":"text","text":{"content":"() => 'hello'","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"() => 'hello'","href":null},{"type":"text","text":{"content":")","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":")","href":null}],[{"type":"text","text":{"content":"undefined","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"undefined","href":null}],[{"type":"text","text":{"content":"null","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"null","href":null}],[{"type":"text","text":{"content":"unknown","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"unknown","href":null}],[{"type":"text","text":{"content":"any","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"any","href":null}]]},{"type":"paragraph","content":[{"type":"text","text":{"content":"For all of these types, the only type that can be equal to it, is itself or the same set (which is the same thing). ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For all of these types, the only type that can be equal to it, is itself or the same set (which is the same thing). ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Assignable","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Assignable","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"We can use extends to assert whether a type (be it a literal or a set) is a subset of another type. For example, we can use ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"We can use extends to assert whether a type (be it a literal or a set) is a subset of another type. For example, we can use ","href":null},{"type":"text","text":{"content":"extends","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"extends","href":null},{"type":"text","text":{"content":" to check if a literal is a part of a string type. The trick about literals is that,","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to check if a literal is a part of a string type. The trick about literals is that,","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"The only thing that can be part of that literal type is that literal itself","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The only thing that can be part of that literal type is that literal itself","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Think of a literal as a unit building block, a literal type has no sub types and thus the only type that can be extended from it, is itself.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Think of a literal as a unit building block, a literal type has no sub types and thus the only type that can be extended from it, is itself.","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"type Assignable<A, B> = A extends B ? true : false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type Assignable<A, B> = A extends B ? true : false","href":null}],"language":"typescript"},{"type":"code","content":[{"type":"text","text":{"content":"Assignable<'hello', string> \n//^?true\n\nAssignable<'hello', 'hello'> \n//^?true\n\nAssignable<'hello', 'world'> \n//^?false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Assignable<'hello', string> \n//^?true\n\nAssignable<'hello', 'hello'> \n//^?true\n\nAssignable<'hello', 'world'> \n//^?false","href":null}],"language":"typescript"},{"type":"code","content":[{"type":"text","text":{"content":"Assignable<1, number> \n//^?true\n\nAssignable<1, 1> \n//^?true\n\nAssignable<1, 4000> \n//^?false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Assignable<1, number> \n//^?true\n\nAssignable<1, 1> \n//^?true\n\nAssignable<1, 4000> \n//^?false","href":null}],"language":"typescript"},{"type":"code","content":[{"type":"text","text":{"content":"Assignable<true, boolean> \n//^?true\n\nAssignable<true, true> \n//^?true\n\nAssignable<true, false> \n//^?false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Assignable<true, boolean> \n//^?true\n\nAssignable<true, true> \n//^?true\n\nAssignable<true, false> \n//^?false","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"We can observe here that within the context of literals, extends can be used to determine equality.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"We can observe here that within the context of literals, extends can be used to determine equality.","href":null}]},{"type":"callout","content":[{"type":"text","text":{"content":"Extends can be used to determine type equality if the type is a literal.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Extends can be used to determine type equality if the type is a literal.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Limits of Assignability","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Limits of Assignability","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s put this to the test against all our types and see how it matches up against our expectations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s put this to the test against all our types and see how it matches up against our expectations","href":null}]},{"type":"unknown","content":"table"},{"type":"paragraph","content":[]},{"type":"unknown","content":"table"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Works with literals","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Works with literals","href":null}]},{"type":"paragraph","content":[]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Mutually assignable","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Mutually assignable","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Back to equality, ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Back to equality, ","href":null},{"type":"text","text":{"content":"A extends B","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"A extends B","href":null},{"type":"text","text":{"content":" checks if A is a subtype of B. Therefore, if B is also a subtype of A, this would mean that A = B. I.e if A = ‘1’ | ‘2’ and B = ‘1’ | ‘2’ , both types are valid subtypes of each other. And thus two types are equal !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" checks if A is a subtype of B. Therefore, if B is also a subtype of A, this would mean that A = B. I.e if A = ‘1’ | ‘2’ and B = ‘1’ | ‘2’ , both types are valid subtypes of each other. And thus two types are equal !","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"However, this is not necessarily true, if we’re dealing with object types.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"However, this is not necessarily true, if we’re dealing with object types.","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"type A = { a: string, b?: string}\ntype B = { a: string} \n\nfunction swap(a: A, b: B) {\n    a = b;\n    b = a;\n\n    a.a = b.a;\n    a.b = ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type A = { a: string, b?: string}\ntype B = { a: string} \n\nfunction swap(a: A, b: B) {\n    a = b;\n    b = a;\n\n    a.a = b.a;\n    a.b = ","href":null},{"type":"text","text":{"content":"b.b; //Property 'b' does not exist on type 'B'.ts(2339)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":true,"code":false,"color":"red"},"plain_text":"b.b; //Property 'b' does not exist on type 'B'.ts(2339)","href":null},{"type":"text","text":{"content":"\n\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n\n}","href":null}],"language":"typescript"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s take a step back and understand how the object type works.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s take a step back and understand how the object type works.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Object Type as a Set ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Object Type as a Set ","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Assignability ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Assignability ","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Mutual Assignability","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Mutual Assignability","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Any","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Any","href":null},{"type":"text","text":{"content":" other edge cases ?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" other edge cases ?","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Equal","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Equal","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"type Equal<A,B> = ///something here","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"type Equal<A,B> = ///something here","href":null}],"language":"typescript"},{"type":"heading_2","content":[{"type":"text","text":{"content":"Literals","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Literals","href":null}]},{"type":"heading_2","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"As mentioned earlier, two sets are equal if they both have the same elements. We could translate it to typescript as such - if the two types have the same assignable and un-assignable subtypes, the two given types are equal. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"As mentioned earlier, two sets are equal if they both have the same elements. We could translate it to typescript as such - if the two types have the same assignable and un-assignable subtypes, the two given types are equal. ","href":null}]},{"type":"paragraph","content":[]}],"slug":"what-even-is-equality","page_id":"c5b53711-f152-4660-b848-389df92a66bc","title":"What even is Equality ? ","description":"Understanding how type equality works in typescript","skills":["Typescript"],"cover":"https://images.unsplash.com/photo-1532080164546-38ee251aab39?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2023-12-07","published":false}},{"params":{"slug":"async-confirm"},"props":{"blocks":[{"type":"paragraph","content":[{"type":"text","text":{"content":"I find my current implementation of confirmation dialogs is difficult to read which is to bake in both the visual state and the resulting actions into one component. Sure it works - however, when I read the code sometime later, I find that it’s difficult to digest. And so, I wanted to explore implementing a confirmation dialog in a way that could be easier to understand.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I find my current implementation of confirmation dialogs is difficult to read which is to bake in both the visual state and the resulting actions into one component. Sure it works - however, when I read the code sometime later, I find that it’s difficult to digest. And so, I wanted to explore implementing a confirmation dialog in a way that could be easier to understand.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Quick Definitions","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Quick Definitions","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A modal is any popup that visually appears above the current page, capturing the user’s attention for a task that requires immediate action. It’s a blocking element meaning that the modal’s task needs to be completed before the user can continue. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A modal is any popup that visually appears above the current page, capturing the user’s attention for a task that requires immediate action. It’s a blocking element meaning that the modal’s task needs to be completed before the user can continue. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A confirmation is a subset of a modal that acts as a safety net before an action and is typically used with destructive actions - i.e user confirmation before deleting an account. While the async method we discover below can be altered to fit all modals, in this post we will only focus on confirmation dialogs to keep the scope limited. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A confirmation is a subset of a modal that acts as a safety net before an action and is typically used with destructive actions - i.e user confirmation before deleting an account. While the async method we discover below can be altered to fit all modals, in this post we will only focus on confirmation dialogs to keep the scope limited. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"A Simple Example","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A Simple Example","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In this post, we will design and implement a confirmation dialog to verify that user wants to delete their account. Let’s get started by understanding the different states that this problem can be in - drawing out the user’s flow.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In this post, we will design and implement a confirmation dialog to verify that user wants to delete their account. Let’s get started by understanding the different states that this problem can be in - drawing out the user’s flow.","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"Flow chart representing the different states that a user can flow through","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Flow chart representing the different states that a user can flow through","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"Before we get started on the async solution, here is a simple implementation of the above flow chart. This is quite similar to how I ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Before we get started on the async solution, here is a simple implementation of the above flow chart. This is quite similar to how I ","href":null},{"type":"text","text":{"content":"used","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"used","href":null},{"type":"text","text":{"content":" to implement my confirmation dialogs. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to implement my confirmation dialogs. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"export function DialogDemo() {\n  //Controls the visual state of dialog\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const { toast } = useToast();\n\n  const handleOpenDialog = () => {\n    setShowConfirmDialog(true);\n  };\n\n  const handleCancel = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Phew, that was close!\",\n    });\n  };\n  const handleConfirm = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Account deleted\",\n      variant: \"destructive\",\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={handleOpenDialog}>Delete Account</Button>\n      <Confirmation\n        // Additional props to make this a reusuable component\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n        isOpen={showConfirmDialog}\n        // Actions to be run upon cancellation.\n        onCancel={handleCancel}\n        onConfirm={handleConfirm}\n      />\n      <Toaster />\n    </>\n  );\n}\n\ntype ConfirmationProps = {\n  title: React.ReactNode,\n  description: React.ReactNode,\n  confirmLabel: string,\n  isOpen: boolean,\n  onConfirm: () => void,\n  onCancel: () => void,\n};\nconst Confirmation = (props: ConfirmationProps) => {\n  return (\n    //Alert Dialog shows the component depending on the state of the open prop\n    <AlertDialog open={props.isOpen}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{props.title}</AlertDialogTitle>\n          <AlertDialogDescription>{props.description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={props.onCancel}>Cancel</AlertDialogCancel>\n          <AlertDialogAction onClick={props.onConfirm}>\n            {props.confirmLabel}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"export function DialogDemo() {\n  //Controls the visual state of dialog\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const { toast } = useToast();\n\n  const handleOpenDialog = () => {\n    setShowConfirmDialog(true);\n  };\n\n  const handleCancel = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Phew, that was close!\",\n    });\n  };\n  const handleConfirm = () => {\n    setShowConfirmDialog(false);\n    toast({\n      title: \"Account deleted\",\n      variant: \"destructive\",\n    });\n  };\n\n  return (\n    <>\n      <Button onClick={handleOpenDialog}>Delete Account</Button>\n      <Confirmation\n        // Additional props to make this a reusuable component\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n        isOpen={showConfirmDialog}\n        // Actions to be run upon cancellation.\n        onCancel={handleCancel}\n        onConfirm={handleConfirm}\n      />\n      <Toaster />\n    </>\n  );\n}\n\ntype ConfirmationProps = {\n  title: React.ReactNode,\n  description: React.ReactNode,\n  confirmLabel: string,\n  isOpen: boolean,\n  onConfirm: () => void,\n  onCancel: () => void,\n};\nconst Confirmation = (props: ConfirmationProps) => {\n  return (\n    //Alert Dialog shows the component depending on the state of the open prop\n    <AlertDialog open={props.isOpen}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{props.title}</AlertDialogTitle>\n          <AlertDialogDescription>{props.description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={props.onCancel}>Cancel</AlertDialogCancel>\n          <AlertDialogAction onClick={props.onConfirm}>\n            {props.confirmLabel}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"In the parent component ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In the parent component ","href":null},{"type":"text","text":{"content":"DialogDemo","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"DialogDemo","href":null},{"type":"text","text":{"content":" we’ve defined 3 functions that manages opening the dialog and the actions that will be run upon confirmation and cancellation. The visual state is managed here via the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" we’ve defined 3 functions that manages opening the dialog and the actions that will be run upon confirmation and cancellation. The visual state is managed here via the ","href":null},{"type":"text","text":{"content":"showConfirmDialog","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"showConfirmDialog","href":null},{"type":"text","text":{"content":" state variable. All these are then passed as props into a reusable ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" state variable. All these are then passed as props into a reusable ","href":null},{"type":"text","text":{"content":"Confirmation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"Confirmation","href":null},{"type":"text","text":{"content":" component which is a wrapper around ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" component which is a wrapper around ","href":null},{"type":"text","text":{"content":"Shadcn","link":{"url":"https://ui.shadcn.com/docs/components/alert-dialog"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Shadcn","href":"https://ui.shadcn.com/docs/components/alert-dialog"},{"type":"text","text":{"content":"’s excellent ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"’s excellent ","href":null},{"type":"text","text":{"content":"AlertDialog","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"AlertDialog","href":null},{"type":"text","text":{"content":" , powered by ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" , powered by ","href":null},{"type":"text","text":{"content":"Radix UI","link":{"url":"https://www.radix-ui.com/docs/primitives/components/alert-dialog#api-reference"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Radix UI","href":"https://www.radix-ui.com/docs/primitives/components/alert-dialog#api-reference"},{"type":"text","text":{"content":" which manages the UI parts of the rendering. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" which manages the UI parts of the rendering. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Solution Design","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Solution Design","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"quote","content":[{"type":"text","text":{"content":"“Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. ...[Therefore,] making it easy to read makes it easier to write.”\n― Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"“Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. ...[Therefore,] making it easy to read makes it easier to write.”\n― Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"While the above solution implements the flow chart, when reading the code, I find that it lacks clarity in explaining the confirmation dialog progresses from one state to another.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"While the above solution implements the flow chart, when reading the code, I find that it lacks clarity in explaining the confirmation dialog progresses from one state to another.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I wanted to create an abstraction with improved readability that would allow the reader to understand what’s happening in a procedural manner. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I wanted to create an abstraction with improved readability that would allow the reader to understand what’s happening in a procedural manner. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I was inspired from browser native ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I was inspired from browser native ","href":null},{"type":"text","text":{"content":"confirm api","link":{"url":"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"confirm api","href":"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm"},{"type":"text","text":{"content":". Here is how it works - by calling the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". Here is how it works - by calling the ","href":null},{"type":"text","text":{"content":"confirm()","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"confirm()","href":null},{"type":"text","text":{"content":" function, a synchronous modal opens with the text you passed in as a parameter. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" function, a synchronous modal opens with the text you passed in as a parameter. ","href":null},{"type":"text","text":{"content":"It stops code execution on your app as it blocks the javascript thread until a response is provided.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"It stops code execution on your app as it blocks the javascript thread until a response is provided.","href":null},{"type":"text","text":{"content":" ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"red"},"plain_text":" ","href":null},{"type":"text","text":{"content":"The response is provided via two buttons, Cancel and OK. If the user selects OK, the function returns true, else it returns false. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The response is provided via two buttons, Cancel and OK. If the user selects OK, the function returns true, else it returns false. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"There are clear drawbacks in terms of customisation. This includes the fact that the modal appears in a separate window and the labels and dialog cannot be modified. In terms of performance, the function runs synchronously, meaning that all background code execution in your app is paused until the user responds.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"There are clear drawbacks in terms of customisation. This includes the fact that the modal appears in a separate window and the labels and dialog cannot be modified. In terms of performance, the function runs synchronously, meaning that all background code execution in your app is paused until the user responds.","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"The confirmation dialog when using the Arc browser. Notice how the icon of the browser shows up in this dialog.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The confirmation dialog when using the Arc browser. Notice how the icon of the browser shows up in this dialog.","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"Following the api of the native confirm method, I want to explore implementing a component that can be ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Following the api of the native confirm method, I want to explore implementing a component that can be ","href":null},{"type":"text","text":{"content":"asynchronously","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"asynchronously","href":null},{"type":"text","text":{"content":" closed. When I consume this api, it should look like this","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" closed. When I consume this api, it should look like this","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const handleDelete = async () => {\n\t// This should automagically open the dialog\n  const result = await getConfirmation(); \n\n  // The following code should only execute after the dialog is closed by the user.\n  if (result === true) {\n    // Confirm was clicked\n    runCofirmAction();\n  } else {\n    // Cancel was clicked\n    runCancelAction();\n  }\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const handleDelete = async () => {\n\t// This should automagically open the dialog\n  const result = await getConfirmation(); \n\n  // The following code should only execute after the dialog is closed by the user.\n  if (result === true) {\n    // Confirm was clicked\n    runCofirmAction();\n  } else {\n    // Cancel was clicked\n    runCancelAction();\n  }\n};","href":null}],"language":"javascript"},{"type":"heading_1","content":[{"type":"text","text":{"content":"Implementation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Implementation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s break down what we’re trying to accomplish here. We need to wait on a promise that opens the dialog when it starts. This promise is only resolved when either the confirm or cancel button is clicked, returning true or false respectively. We can then use this boolean to control the flow of the code and execute the corresponding action.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s break down what we’re trying to accomplish here. We need to wait on a promise that opens the dialog when it starts. This promise is only resolved when either the confirm or cancel button is clicked, returning true or false respectively. We can then use this boolean to control the flow of the code and execute the corresponding action.","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Encapsulating the Visual State logic","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Encapsulating the Visual State logic","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s start by creating a simple hook called ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s start by creating a simple hook called ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" to contain the opening and closing of the dialog. This hook should return two objects, a function which can trigger opening the modal and the modal component itself. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to contain the opening and closing of the dialog. This hook should return two objects, a function which can trigger opening the modal and the modal component itself. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n\n  const getConfirmation = () => {\n    setOpen(true);\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n  };\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleClick}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleClick}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n\n  const getConfirmation = () => {\n    setOpen(true);\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n  };\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleClick}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleClick}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Awesome, now we’re headed somewhere ! Let us also rewrite our parent component to consume the new ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Awesome, now we’re headed somewhere ! Let us also rewrite our parent component to consume the new ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" hook.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" hook.","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"function DialogDemo() {\n  const { getConfirmation, Confirmation } = useConfirm();\n\n  const handleDelete = () => {\n    getConfirmation();\n  };\n  return;\n  <>\n    <Button onClick={handleDelete}>Delete</Button>\n    <Confirmation\n      title=\"Are you sure?\"\n      description=\"This action is permanent. You cannot undo this action.\"\n      confirmLabel=\"Delete Account\"\n    />\n  </>;\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"function DialogDemo() {\n  const { getConfirmation, Confirmation } = useConfirm();\n\n  const handleDelete = () => {\n    getConfirmation();\n  };\n  return;\n  <>\n    <Button onClick={handleDelete}>Delete</Button>\n    <Confirmation\n      title=\"Are you sure?\"\n      description=\"This action is permanent. You cannot undo this action.\"\n      confirmLabel=\"Delete Account\"\n    />\n  </>;\n}","href":null}],"language":"typescript"},{"type":"heading_2","content":[{"type":"text","text":{"content":"Promisifying the function","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Promisifying the function","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The last part of this implementation, the meat and potatoes of this problem involves awaiting on the dialog. This involves using a promise that should start when the function is called and is only resolved when either the confirm or cancellation button is clicked. If you’ve only consumed promises and not really created your own promise, now is a great time to read up on how a promise actually works. Here in the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The last part of this implementation, the meat and potatoes of this problem involves awaiting on the dialog. This involves using a promise that should start when the function is called and is only resolved when either the confirm or cancellation button is clicked. If you’ve only consumed promises and not really created your own promise, now is a great time to read up on how a promise actually works. Here in the ","href":null},{"type":"text","text":{"content":"MDN article","link":{"url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"MDN article","href":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here is what the skeleton of a promise looks like","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here is what the skeleton of a promise looks like","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"//If you're using typescript, casting the promise as a boolean allows the\n//typechecker to know that the result of the promise will be a boolean\n\nconst isEven = (n: number) =>\n  new Promise() <\n  boolean >\n  ((resolve, reject) => {\n    /* If the promise cannot be completed, reject with a response \n\t\t\t that can be caught with error handling\n\t\t*/\n    if (typeof n !== \"number\") {\n      reject(\"invalid input type\");\n    }\n\n    // Execute the code within the promise\n    const result = n % 2 === 0;\n    /* Resolve with the result which will be accessible after the promise is \n\t\tawaited */\n    resolve(result);\n  });\n\nconst isFiveEven = await isEven(5);\n//isFiveEven results in false","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"//If you're using typescript, casting the promise as a boolean allows the\n//typechecker to know that the result of the promise will be a boolean\n\nconst isEven = (n: number) =>\n  new Promise() <\n  boolean >\n  ((resolve, reject) => {\n    /* If the promise cannot be completed, reject with a response \n\t\t\t that can be caught with error handling\n\t\t*/\n    if (typeof n !== \"number\") {\n      reject(\"invalid input type\");\n    }\n\n    // Execute the code within the promise\n    const result = n % 2 === 0;\n    /* Resolve with the result which will be accessible after the promise is \n\t\tawaited */\n    resolve(result);\n  });\n\nconst isFiveEven = await isEven(5);\n//isFiveEven results in false","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Notice how resolver and rejector parameters are only available within the scope of the executor function that is passed into the promise. This is a problem in the context of the confirmation dialog, since this promise should only be resolved upon user action. For example","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notice how resolver and rejector parameters are only available within the scope of the executor function that is passed into the promise. This is a problem in the context of the confirmation dialog, since this promise should only be resolved upon user action. For example","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((resolve) => {\n    //Only call resolve when the user clicks on a button.\n  });\n  return promise;\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((resolve) => {\n    //Only call resolve when the user clicks on a button.\n  });\n  return promise;\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"This means that the resolver needs to be accessible outside of the promise itself and here we use React’s ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This means that the resolver needs to be accessible outside of the promise itself and here we use React’s ","href":null},{"type":"text","text":{"content":"useRef","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useRef","href":null},{"type":"text","text":{"content":" hook to leverage this. When the promise is created, we assign the resolver to the ref. Then, when the user clicks on the confirmation or cancellation, we can use the ref to resolve the promise appropriately.  ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" hook to leverage this. When the promise is created, we assign the resolver to the ref. Then, when the user clicks on the confirmation or cancellation, we can use the ref to resolve the promise appropriately.  ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"const resolver = useRef<null | ((value: boolean) => void)>(null);\nconst [open, setOpen] = useState(false);\n\nconst getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((r) => {\n    resolver.current = r;\n  });\n  return promise;\n};\n\nconst handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\nconst handleConfirm = () => handleClick(true);\nconst handleCancel = () => handleClick(false);","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"const resolver = useRef<null | ((value: boolean) => void)>(null);\nconst [open, setOpen] = useState(false);\n\nconst getConfirmation = () => {\n  setOpen(true);\n  const promise = new Promise<boolean>((r) => {\n    resolver.current = r;\n  });\n  return promise;\n};\n\nconst handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\nconst handleConfirm = () => handleClick(true);\nconst handleCancel = () => handleClick(false);","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Awesome ! Let’s add this to our ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Awesome ! Let’s add this to our ","href":null},{"type":"text","text":{"content":"useConfirm","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"useConfirm","href":null},{"type":"text","text":{"content":" to promisify awaiting on the dialog for user input. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" to promisify awaiting on the dialog for user input. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useRef, useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n  const resolver = useRef<null | ((value: boolean) => void)>(null);\n\n  const getConfirmation = () => {\n    setOpen(true);\n    const promise = new Promise<boolean>((r) => {\n      resolver.current = r;\n    });\n    return promise;\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\n  const handleConfirm = () => handleClick(true);\n  const handleCancel = () => handleClick(false);\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleCancel}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirm}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useRef, useState } from \"react\";\n\nexport const useConfirm = () => {\n  const [isOpen, setOpen] = useState(false);\n  const resolver = useRef<null | ((value: boolean) => void)>(null);\n\n  const getConfirmation = () => {\n    setOpen(true);\n    const promise = new Promise<boolean>((r) => {\n      resolver.current = r;\n    });\n    return promise;\n  };\n\n  const handleClick = (value: boolean) => {\n    setOpen(false);\n    if (resolver.current === null) {\n      throw new Error(\n        \"Resolver hasn't been set ! This is caused when you call onClick() before calling getConfirmation()\"\n      );\n    }\n    resolver.current(value);\n  };\n\n  const handleConfirm = () => handleClick(true);\n  const handleCancel = () => handleClick(false);\n\n  type ConfirmationProps = {\n    title: React.ReactNode;\n    description: React.ReactNode;\n    confirmLabel: string;\n  };\n  const Confirmation = (props: ConfirmationProps) => {\n    return (\n      <AlertDialog open={isOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{props.title}</AlertDialogTitle>\n            <AlertDialogDescription>{props.description}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={handleCancel}>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirm}>\n              {props.confirmLabel}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    );\n  };\n\n  return { getConfirmation, Confirmation };\n};","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"And now, it’s finally time to consume our custom hook. Here is how that could look like","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"And now, it’s finally time to consume our custom hook. Here is how that could look like","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"import { Button } from \"@/components/ui/button\";\nimport { useConfirm } from \"./useConfirm\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\nexport function DialogDemo() {\n  const { Confirmation, getConfirmation } = useConfirm();\n  const { toast } = useToast();\n\n  const handleDeleteAccount = async () => {\n    const result = await getConfirmation();\n    if (result === true) {\n      toast({\n        title: \"Account deleted\",\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Phew, that was close!\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={handleDeleteAccount}>Delete Account</Button>\n      <Confirmation\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n      />\n      <Toaster />\n    </>\n  );\n}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"import { Button } from \"@/components/ui/button\";\nimport { useConfirm } from \"./useConfirm\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\nexport function DialogDemo() {\n  const { Confirmation, getConfirmation } = useConfirm();\n  const { toast } = useToast();\n\n  const handleDeleteAccount = async () => {\n    const result = await getConfirmation();\n    if (result === true) {\n      toast({\n        title: \"Account deleted\",\n        variant: \"destructive\",\n      });\n    } else {\n      toast({\n        title: \"Phew, that was close!\",\n      });\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={handleDeleteAccount}>Delete Account</Button>\n      <Confirmation\n        title=\"Are you sure?\"\n        description=\"This action is permanent. You cannot undo this action.\"\n        confirmLabel=\"Delete Account\"\n      />\n      <Toaster />\n    </>\n  );\n}","href":null}],"language":"typescript"},{"type":"paragraph","content":[{"type":"text","text":{"content":"I love how much cleaner this implementation is. The messy visual state logic is abstracted away, and the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I love how much cleaner this implementation is. The messy visual state logic is abstracted away, and the ","href":null},{"type":"text","text":{"content":"handleDeleteAccount","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"handleDeleteAccount","href":null},{"type":"text","text":{"content":" clearly shows what is happening. First we’re waiting on the confirmation and depending on the confirmation the corresponding toast is shown !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" clearly shows what is happening. First we’re waiting on the confirmation and depending on the confirmation the corresponding toast is shown !","href":null}]},{"type":"paragraph","content":[]}],"slug":"async-confirm","page_id":"558b8cf8-cd42-482a-9189-749cf0c529a9","title":"Designing an Async Confirmation Dialog ","description":"Making an Async confirmation dialog with react","skills":["React","Typescript"],"cover":"https://images.unsplash.com/photo-1577563908411-5077b6dc7624?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2023-08-30","published":true}},{"params":{"slug":"cloud-run-with-github-actions"},"props":{"blocks":[{"type":"heading_1","content":[{"type":"text","text":{"content":"Technical Overview","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Technical Overview","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Cloud Run is my favourite platform to host web applications. Between AWS Fargate, Azure Container Instances & Google Cloud Run, I’ve found that the Google Cloud Platform (GCP) provides the best developer experience in getting a Docker container accessible public internet, having to configure the bare minimum.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cloud Run is my favourite platform to host web applications. Between AWS Fargate, Azure Container Instances & Google Cloud Run, I’ve found that the Google Cloud Platform (GCP) provides the best developer experience in getting a Docker container accessible public internet, having to configure the bare minimum.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"To explore how one can deploy a web application with a continuous integration (CI) pipeline, I’ve created a simple API service available at ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"To explore how one can deploy a web application with a continuous integration (CI) pipeline, I’ve created a simple API service available at ","href":null},{"type":"mention","mention":{"type":"link_preview","link_preview":{"url":"https://github.com/dca123/fastify-server"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/dca123/fastify-server","href":"https://github.com/dca123/fastify-server"},{"type":"text","text":{"content":". This is a simple Fastify web server that returns JSON responses. I’ve also included a Dockerfile to containerise this application such that it can be run in any machine - including Cloud Run.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". This is a simple Fastify web server that returns JSON responses. I’ve also included a Dockerfile to containerise this application such that it can be run in any machine - including Cloud Run.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Overview","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Overview","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The objective is to build a CI/CD pipeline where a new build is created and deployed every time a commit is pushed to main. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The objective is to build a CI/CD pipeline where a new build is created and deployed every time a commit is pushed to main. ","href":null}]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"heading_1","content":[{"type":"text","text":{"content":"Manual Deployment","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Manual Deployment","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Before we automate the deployment process, let’s deploy it manually to understand what needs to be done. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Before we automate the deployment process, let’s deploy it manually to understand what needs to be done. ","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"First let’s push an image to the Google Artifact Repository.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"First let’s push an image to the Google Artifact Repository.","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Create an Artifact repository in the Docker format. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Create an Artifact repository in the Docker format. ","href":null}]},{"type":"paragraph","content":[]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Docker images have to be tagged in a certain way","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Docker images have to be tagged in a certain way","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"australia-southeast1-docker.pkg.dev/${PROJECT_ID}/${repo_name}/${image_name}:${tag}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"australia-southeast1-docker.pkg.dev/${PROJECT_ID}/${repo_name}/${image_name}:${tag}","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"You can use the file explorer to quickly copy the first part of this tag","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"You can use the file explorer to quickly copy the first part of this tag","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/${image_name}:{tag}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/${image_name}:{tag}","href":null}]},{"type":"paragraph","content":[]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"Since this is an api, let’s call the image ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Since this is an api, let’s call the image ","href":null},{"type":"text","text":{"content":"api","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"api","href":null},{"type":"text","text":{"content":". Since the latest code is used to build the image, let’s call the tag ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". Since the latest code is used to build the image, let’s call the tag ","href":null},{"type":"text","text":{"content":"latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"latest","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This gives us the final tag ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This gives us the final tag ","href":null},{"type":"text","text":{"content":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"code","content":[{"type":"text","text":{"content":"docker build -t australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest .","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"docker build -t australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest .","href":null}],"language":"bash"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Ensure this works on your machine","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Ensure this works on your machine","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"docker run -it -p 3000:3000 australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"docker run -it -p 3000:3000 australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","href":null}],"language":"bash"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Visit ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Visit ","href":null},{"type":"text","text":{"content":"http://localhost:3000/","link":{"url":"http://localhost:3000/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"http://localhost:3000/","href":"http://localhost:3000/"},{"type":"text","text":{"content":" and you should see ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" and you should see ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"{\"healthy\":true,\"version\":\"1.0.0\"}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{\"healthy\":true,\"version\":\"1.0.0\"}","href":null}],"language":"bash"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Docs ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Docs ","href":null},{"type":"text","text":{"content":"https://cloud.google.com/artifact-registry/docs/docker/pushing-and-pulling","link":{"url":"https://cloud.google.com/artifact-registry/docs/docker/pushing-and-pulling"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://cloud.google.com/artifact-registry/docs/docker/pushing-and-pulling","href":"https://cloud.google.com/artifact-registry/docs/docker/pushing-and-pulling"}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"https://cloud.google.com/artifact-registry/docs/docker/authentication","link":{"url":"https://cloud.google.com/artifact-registry/docs/docker/authentication"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://cloud.google.com/artifact-registry/docs/docker/authentication","href":"https://cloud.google.com/artifact-registry/docs/docker/authentication"}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Authenticate docker with the Artifact repository ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Authenticate docker with the Artifact repository ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"gcloud auth configure-docker australia-southeast1-docker.pkg.dev","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"gcloud auth configure-docker australia-southeast1-docker.pkg.dev","href":null}],"language":"bash"},{"type":"paragraph","content":[{"type":"text","text":{"content":"Push your image to docker","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Push your image to docker","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"docker push australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"docker push australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","href":null}],"language":"bash"},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Create a new Cloud Run service with the following parameters","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Create a new Cloud Run service with the following parameters","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"gcloud run deploy demo-service \\\n--image=australia-southeast1-docker.pkg.dev/$PROJECT_ID/demo-service/api:latest \\\n--allow-unauthenticated \\\n--min-instances=1 \\\n--set-env-vars=SECRET=my-secret \\\n--region=australia-southeast1 \\\n--project=$PROJECT_ID","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"gcloud run deploy demo-service \\\n--image=australia-southeast1-docker.pkg.dev/$PROJECT_ID/demo-service/api:latest \\\n--allow-unauthenticated \\\n--min-instances=1 \\\n--set-env-vars=SECRET=my-secret \\\n--region=australia-southeast1 \\\n--project=$PROJECT_ID","href":null}],"language":"bash"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Select","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Select","href":null},{"type":"text","text":{"content":" Deploy one revision from an existing container image","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"gray_background"},"plain_text":" Deploy one revision from an existing container image","href":null},{"type":"text","text":{"content":" ","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" ","href":null},{"type":"text","text":{"content":"with the following container image URL","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"with the following container image URL","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Image - ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Image - ","href":null},{"type":"text","text":{"content":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Service Name - Service ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Service Name - Service ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Region - The region in which your service is deployed","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Region - The region in which your service is deployed","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Min instances - Setting it at one prevents cold boots","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Min instances - Setting it at one prevents cold boots","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Set env vars - Environment variables used by your app, i.e database url can be set here","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Set env vars - Environment variables used by your app, i.e database url can be set here","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Go to the URL that the service is deployed on. The URL should look like this ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Go to the URL that the service is deployed on. The URL should look like this ","href":null},{"type":"text","text":{"content":"https://demo-service-s3yt2imx2q-ts.a.run.app","link":{"url":"https://demo-service-s3yt2imx2q-ts.a.run.app/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"https://demo-service-s3yt2imx2q-ts.a.run.app","href":"https://demo-service-s3yt2imx2q-ts.a.run.app/"}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"You should see the same response as you saw on your local machine, but with your secret this time","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"You should see the same response as you saw on your local machine, but with your secret this time","href":null}]},{"type":"paragraph","content":[]},{"type":"code","content":[{"type":"text","text":{"content":"{\"healthy\":true,\"version\":\"1.0.0\",\"secret\":\"my-secret\"}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"{\"healthy\":true,\"version\":\"1.0.0\",\"secret\":\"my-secret\"}","href":null}],"language":"bash"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Awesome ! We’ve deployed it manually. Now let’s automate this process.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Awesome ! We’ve deployed it manually. Now let’s automate this process.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Automate Deployment","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Automate Deployment","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Everything about Github Actions can be done via a yaml file in your repo ! This actually applies to other GitHub functionalities such as PR & Issue templates, dependabot configs & other files shown in your repo, but I digress. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Everything about Github Actions can be done via a yaml file in your repo ! This actually applies to other GitHub functionalities such as PR & Issue templates, dependabot configs & other files shown in your repo, but I digress. ","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"You will be spending some time getting used to different syntax available, for which I recommend having ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"You will be spending some time getting used to different syntax available, for which I recommend having ","href":null},{"type":"text","text":{"content":"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions","link":{"url":"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions","href":"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions"},{"type":"text","text":{"content":" open on a seperate tab. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" open on a seperate tab. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"If you’re using VSCode, I also recommend the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"If you’re using VSCode, I also recommend the ","href":null},{"type":"text","text":{"content":"GitHub Actions ","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"GitHub Actions ","href":null},{"type":"text","text":{"content":"extension developed by Christopher Schleiden available at ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"extension developed by Christopher Schleiden available at ","href":null},{"type":"text","text":{"content":"https://marketplace.visualstudio.com/items?itemName=cschleiden.vscode-github-actions","link":{"url":"https://marketplace.visualstudio.com/items?itemName=cschleiden.vscode-github-actions"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://marketplace.visualstudio.com/items?itemName=cschleiden.vscode-github-actions","href":"https://marketplace.visualstudio.com/items?itemName=cschleiden.vscode-github-actions"}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This extension makes it super easy to create the config file as it formats and provides autocomplete support !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This extension makes it super easy to create the config file as it formats and provides autocomplete support !","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"\n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\n","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s start with creating a file named ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s start with creating a file named ","href":null},{"type":"text","text":{"content":"on-main.yml","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"on-main.yml","href":null}]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The completed file will look like this, but in the next sections I will go over each of these steps and explain what they are about.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The completed file will look like this, but in the next sections I will go over each of these steps and explain what they are about.","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"name: Build & Deploy to gcloud\non:\n  push:\n    branches:\n      - feature/ci-gcloud\n\n\njobs:\n\tdeploy:\n\t    permissions:\n\t        contents: read\n\t        id-token: write\n\t    runs-on: ubuntu-latest    \n\t    outputs:\n\t      url: ${{ steps.deploy.outputs.url }}\n\t    steps:\n\t      - uses: docker/setup-buildx-action@v2\n\t        name: Set up Docker Buildx\n\t        id: buildx\n\t\n\t      - uses: google-github-actions/auth@v1\n\t        id: auth\n\t        name: Auth\n\t        with:\n\t          token_format: access_token\n\t          workload_identity_provider: projects/241476313904/locations/global/workloadIdentityPools/github-actions/providers/github\n\t          service_account: github-actions@kpmg-dev-370312.iam.gserviceaccount.com\n\t          \n\t      - uses: docker/login-action@v1\n\t        name: Authenticate to Artifact Registry\n\t        with:\n\t          registry: australia-southeast1-docker.pkg.dev\n\t          username: oauth2accesstoken\n\t          password: ${{ steps.auth.outputs.access_token }}\n\t\n\t      - uses: docker/build-push-action@v3\n\t        name: Build and push Docker image\n\t        with:\n\t          push: true\n\t          file: ${{ inputs.dockerFile }}\n\t          tags: ${{ inputs.imageTag }}\n\t          cache-from: type=gha\n\t          cache-to: type=gha,mode=max\n\t      \n\t      - uses: google-github-actions/deploy-cloudrun@v1\n\t        name: Deploy to Cloud Run\n\t        id: deploy\n\t        with:\n\t          service: ${{ inputs.service }}\n\t          image:  ${{ inputs.imageTag }}\n\t          region: australia-southeast1","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"name: Build & Deploy to gcloud\non:\n  push:\n    branches:\n      - feature/ci-gcloud\n\n\njobs:\n\tdeploy:\n\t    permissions:\n\t        contents: read\n\t        id-token: write\n\t    runs-on: ubuntu-latest    \n\t    outputs:\n\t      url: ${{ steps.deploy.outputs.url }}\n\t    steps:\n\t      - uses: docker/setup-buildx-action@v2\n\t        name: Set up Docker Buildx\n\t        id: buildx\n\t\n\t      - uses: google-github-actions/auth@v1\n\t        id: auth\n\t        name: Auth\n\t        with:\n\t          token_format: access_token\n\t          workload_identity_provider: projects/241476313904/locations/global/workloadIdentityPools/github-actions/providers/github\n\t          service_account: github-actions@kpmg-dev-370312.iam.gserviceaccount.com\n\t          \n\t      - uses: docker/login-action@v1\n\t        name: Authenticate to Artifact Registry\n\t        with:\n\t          registry: australia-southeast1-docker.pkg.dev\n\t          username: oauth2accesstoken\n\t          password: ${{ steps.auth.outputs.access_token }}\n\t\n\t      - uses: docker/build-push-action@v3\n\t        name: Build and push Docker image\n\t        with:\n\t          push: true\n\t          file: ${{ inputs.dockerFile }}\n\t          tags: ${{ inputs.imageTag }}\n\t          cache-from: type=gha\n\t          cache-to: type=gha,mode=max\n\t      \n\t      - uses: google-github-actions/deploy-cloudrun@v1\n\t        name: Deploy to Cloud Run\n\t        id: deploy\n\t        with:\n\t          service: ${{ inputs.service }}\n\t          image:  ${{ inputs.imageTag }}\n\t          region: australia-southeast1","href":null}],"language":"bash"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Let’s name the action, with the config ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Let’s name the action, with the config ","href":null},{"type":"text","text":{"content":"name: Build & Deploy to Gcloud","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"name: Build & Deploy to Gcloud","href":null},{"type":"text","text":{"content":" . This is what you will use to find your workflow inside github actions. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" . This is what you will use to find your workflow inside github actions. ","href":null}]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"We want this action to be built on changes to main. If you’re developing this on a Pull Request, you can add the name of your branch here instead while testing out the CI process. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"We want this action to be built on changes to main. If you’re developing this on a Pull Request, you can add the name of your branch here instead while testing out the CI process. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"on:\n  push:\n    branches:\n      - feature/ci-gcloud","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"on:\n  push:\n    branches:\n      - feature/ci-gcloud","href":null}],"language":"yaml"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Once we’ve authenticated the instance with GCP, we need to authenticate docker with GCP. Traditionally if you tag an image with a name (hello), and try to run ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Once we’ve authenticated the instance with GCP, we need to authenticate docker with GCP. Traditionally if you tag an image with a name (hello), and try to run ","href":null},{"type":"text","text":{"content":"docker push hello","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"docker push hello","href":null},{"type":"text","text":{"content":", docker with attempt to push the image to ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", docker with attempt to push the image to ","href":null},{"type":"text","text":{"content":"docker.io/library","link":{"url":"http://docker.io/library"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"docker.io/library","href":"http://docker.io/library"},{"type":"text","text":{"content":"/hello, the default public docker library. To be able to upload an image to the GAR (Google Artifact Registry), we need to tell docker that for images starting with a specific tag, i.e ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/hello, the default public docker library. To be able to upload an image to the GAR (Google Artifact Registry), we need to tell docker that for images starting with a specific tag, i.e ","href":null},{"type":"text","text":{"content":"australia-southeast1-docker.pkg.dev","link":{"url":"http://australia-southeast1-docker.pkg.dev/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"australia-southeast1-docker.pkg.dev","href":"http://australia-southeast1-docker.pkg.dev/"},{"type":"text","text":{"content":" , upload it to the correct docker repo within GCR. Thus, docker itself needs to login to the GAR before we can upload the image.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" , upload it to the correct docker repo within GCR. Thus, docker itself needs to login to the GAR before we can upload the image.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This can be done via this stem where we use the access token from the auth step as the password to login to the registry. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This can be done via this stem where we use the access token from the auth step as the password to login to the registry. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"- uses: docker/login-action@v1\n        name: Authenticate to Artifact Registry\n        with:\n          registry: australia-southeast1-docker.pkg.dev\n          username: oauth2accesstoken\n          password: ${{ steps.auth.outputs.access_token }}","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"- uses: docker/login-action@v1\n        name: Authenticate to Artifact Registry\n        with:\n          registry: australia-southeast1-docker.pkg.dev\n          username: oauth2accesstoken\n          password: ${{ steps.auth.outputs.access_token }}","href":null}],"language":"yaml"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Now to build (and push) the image ! This action combines both building and pushing together but you need to remember to enable the push flag. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Now to build (and push) the image ! This action combines both building and pushing together but you need to remember to enable the push flag. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"- uses: docker/build-push-action@v3\n      name: Build and push Docker image\n      with:\n        push: true\n        tags: australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"- uses: docker/build-push-action@v3\n      name: Build and push Docker image\n      with:\n        push: true\n        tags: australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest","href":null}],"language":"yaml"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Once the image is on the GAR, it’s time to deploy our application via Cloud Run. Here we specify the name of the service, the image we will be using and finally the region we want it deployed. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Once the image is on the GAR, it’s time to deploy our application via Cloud Run. Here we specify the name of the service, the image we will be using and finally the region we want it deployed. ","href":null}]},{"type":"paragraph","content":[]},{"type":"code","content":[{"type":"text","text":{"content":"- uses: google-github-actions/deploy-cloudrun@v1\n\t        name: Deploy to Cloud Run\n\t        id: deploy\n\t        with:\n\t          service: demo-service\n\t          image:  australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest\n\t          region: australia-southeast1","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"- uses: google-github-actions/deploy-cloudrun@v1\n\t        name: Deploy to Cloud Run\n\t        id: deploy\n\t        with:\n\t          service: demo-service\n\t          image:  australia-southeast1-docker.pkg.dev/kpmg-dev-370312/demo-service/api:latest\n\t          region: australia-southeast1","href":null}],"language":"yaml"},{"type":"paragraph","content":[]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Did you know that with Github, you can see the status of your environment right from your repository page like so ? Meaning that if a deployment fails, you can see it right on the main psge of your project. If you click on the environment, it even takes you the deployed url ! ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Did you know that with Github, you can see the status of your environment right from your repository page like so ? Meaning that if a deployment fails, you can see it right on the main psge of your project. If you click on the environment, it even takes you the deployed url ! ","href":null}]},{"type":"image","content":{"caption":[],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"To do this, we need to take the output URL from the deploy step and provide it as part of the outputs in the deploy job. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"To do this, we need to take the output URL from the deploy step and provide it as part of the outputs in the deploy job. ","href":null}]},{"type":"code","content":[{"type":"text","text":{"content":"deploy:\n\t    permissions:\n\t        contents: read\n\t        id-token: write\n\t    runs-on: ubuntu-latest    \n","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"deploy:\n\t    permissions:\n\t        contents: read\n\t        id-token: write\n\t    runs-on: ubuntu-latest    \n","href":null},{"type":"text","text":{"content":"\t ","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"red"},"plain_text":"\t ","href":null},{"type":"text","text":{"content":"   outputs:\n\t      url: ${{ steps.deploy.outputs.url }}","link":null},"annotations":{"bold":true,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"red"},"plain_text":"   outputs:\n\t      url: ${{ steps.deploy.outputs.url }}","href":null}],"language":"yaml"},{"type":"paragraph","content":[]}],"slug":"cloud-run-with-github-actions","page_id":"96d64a36-42b1-431b-b4f7-6584728c6a4f","title":"Cloud Run Deployments with Github Actions","description":"Developing an app for hitchhikers to discover popular spots","skills":["Cloud Run","Github Actions","CI/CD"],"cover":"https://www.notion.so/images/page-cover/met_silk_kashan_carpet.jpg","date":"2024-06-02","published":false}},{"params":{"slug":"my-website"},"props":{"blocks":[{"type":"heading_1","content":[{"type":"text","text":{"content":"Feature List","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Feature List","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Static Pages served from the Vercel edge network with 0.8 seconds to interactivity","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Static Pages served from the Vercel edge network with 0.8 seconds to interactivity","href":null}],[{"type":"text","text":{"content":"Notion as a content management system (CMS)","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion as a content management system (CMS)","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I’ve used a variety of content management systems in the past such as Joomla, Wordpress and Wix. However, I never ended using one consistently to keep my website upto date with new content. I discovered that the core problem was that their tools were un-intuitiveas it forced me out of my workflow to do something simple, such as updating a post. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I’ve used a variety of content management systems in the past such as Joomla, Wordpress and Wix. However, I never ended using one consistently to keep my website upto date with new content. I discovered that the core problem was that their tools were un-intuitiveas it forced me out of my workflow to do something simple, such as updating a post. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A few years ago, I integrated Notion into my workflow where I used it to take class notes, journal and work on personal projects. The reason why myself and the rest of the Notion Cult loves using it is that it simplifies our workflows and provides a hierarchical structure to all our documents - while ensuring that it is all catalouged. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A few years ago, I integrated Notion into my workflow where I used it to take class notes, journal and work on personal projects. The reason why myself and the rest of the Notion Cult loves using it is that it simplifies our workflows and provides a hierarchical structure to all our documents - while ensuring that it is all catalouged. ","href":null}]},{"type":"image","content":{"caption":[{"type":"text","text":{"content":"The Notion cult","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The Notion cult","href":null}],"transformedImage":{"rawOptions":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"options":{"src":"https://source.unsplash.com/random","width":1080,"height":null,"quality":100},"src":"/_image?href=https%3A%2F%2Fsource.unsplash.com%2Frandom&w=1080&q=100","srcSet":{"values":[],"attribute":""},"attributes":{"width":1080,"height":null,"loading":"lazy","decoding":"async"}}}},{"type":"paragraph","content":[{"type":"text","text":{"content":"When I bought my domain, I wanted to use a CMS which required the least friction to upload content. I discovered a free tool, ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"When I bought my domain, I wanted to use a CMS which required the least friction to upload content. I discovered a free tool, ","href":null},{"type":"text","text":{"content":"Fruition","link":{"url":"https://fruitionsite.com/771ef38657244c27b9389734a9cbff44"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Fruition","href":"https://fruitionsite.com/771ef38657244c27b9389734a9cbff44"},{"type":"text","text":{"content":" which enabled me to serve my notion page via my domain. Fruition uses a Cloudflare JavaScript worker to display all the contents of the notion site but with the routing was decoupled from the notion domain. So instead of ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" which enabled me to serve my notion page via my domain. Fruition uses a Cloudflare JavaScript worker to display all the contents of the notion site but with the routing was decoupled from the notion domain. So instead of ","href":null},{"type":"text","text":{"content":"https://www.notion.so/devinda/This-Website-361e85f3bef14f1aa4c8ba60ae4b4c88","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"https://www.notion.so/devinda/This-Website-361e85f3bef14f1aa4c8ba60ae4b4c88","href":null},{"type":"text","text":{"content":" , the URL bar would display ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" , the URL bar would display ","href":null},{"type":"text","text":{"content":"devinda.me/This-Website","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"devinda.me/This-Website","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"This setup (","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"This setup (","href":null},{"type":"text","text":{"content":"visit the old site","link":{"url":"http://website.devinda.me/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"visit the old site","href":"http://website.devinda.me/"},{"type":"text","text":{"content":") worked for a few years but there were a few issues that accumulated which ultimately led me to building this site. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":") worked for a few years but there were a few issues that accumulated which ultimately led me to building this site. ","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Long load times - The JavaScript worker just took too long to display my site, sometimes over 30 seconds for complete page render","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Long load times - The JavaScript worker just took too long to display my site, sometimes over 30 seconds for complete page render","href":null}],[{"type":"text","text":{"content":"Poor customization - I wasn’t able to place blocks exactly where I wanted them or have finer control of the information displayed","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Poor customization - I wasn’t able to place blocks exactly where I wanted them or have finer control of the information displayed","href":null}],[{"type":"text","text":{"content":"Potential for breakage - Changes by the Notion team sometimes broke the JavaScript worker which would require me waiting till the Fruition script was fixed","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Potential for breakage - Changes by the Notion team sometimes broke the JavaScript worker which would require me waiting till the Fruition script was fixed","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Sketching on Figma","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sketching on Figma","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Here are some of my initial project designs from Figma. I’ve been studying UX design, and in this project I used ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Here are some of my initial project designs from Figma. I’ve been studying UX design, and in this project I used ","href":null},{"type":"text","text":{"content":"Design Thinking","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Design Thinking","href":null},{"type":"text","text":{"content":". This is an iterative process where I design a feature and then build it before moving onto the next feature. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". This is an iterative process where I design a feature and then build it before moving onto the next feature. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Research","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Research","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Going into this project, I wanted to explore other implementations of Next.JS and the Notion API. I needed a project that uses the newly released official Notion API and I found these two projects -","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Going into this project, I wanted to explore other implementations of Next.JS and the Notion API. I needed a project that uses the newly released official Notion API and I found these two projects -","href":null}]},{"type":"numbered_list_item","content":[[{"type":"mention","mention":{"type":"link_preview","link_preview":{"url":"https://github.com/samuelkraft/notion-blog-nextjs"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/samuelkraft/notion-blog-nextjs","href":"https://github.com/samuelkraft/notion-blog-nextjs"}],[{"type":"mention","mention":{"type":"link_preview","link_preview":{"url":"https://github.com/sven10hove/The-publisher-framework"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://github.com/sven10hove/The-publisher-framework","href":"https://github.com/sven10hove/The-publisher-framework"}]]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I then inspected their code to be inspired by their implementation architecture and understand how they were transforming content from the Notion API to website components. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I then inspected their code to be inspired by their implementation architecture and understand how they were transforming content from the Notion API to website components. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Creating Pages","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Creating Pages","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"/index","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/index","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The most challenging part of this page was ensuring that my name was properly displayed on different devices. The length of my last name meant that work was concentrated here to ensure that the responsiveness and image gradient looks correct across devices. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The most challenging part of this page was ensuring that my name was properly displayed on different devices. The length of my last name meant that work was concentrated here to ensure that the responsiveness and image gradient looks correct across devices. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Show homepage on different devices.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Show homepage on different devices.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Next.JS + Vercel has a different approach to implementing images which optimizes the load time of images. I noticed that with my default settings, the images would take too long to load. This meant that I had to do a bit of iterative tweaking to discover how to show images correctly on the card components. This involved playing around with the width and height attributes along with image sizing until I found a fitting compromise between the image size, resolution and download speed. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Next.JS + Vercel has a different approach to implementing images which optimizes the load time of images. I noticed that with my default settings, the images would take too long to load. This meant that I had to do a bit of iterative tweaking to discover how to show images correctly on the card components. This involved playing around with the width and height attributes along with image sizing until I found a fitting compromise between the image size, resolution and download speed. ","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"/projects/[slug]","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"/projects/[slug]","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I had to create my own API transformer that could convert JSON objects from the Notion API to React components while ensuring it was styled properly with Chakra UI. I built the transformer with a minimalist approach - implement the least required to create a functional project page. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I had to create my own API transformer that could convert JSON objects from the Notion API to React components while ensuring it was styled properly with Chakra UI. I built the transformer with a minimalist approach - implement the least required to create a functional project page. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The first components were quite straight forward to implement - headings, paragraphs and images.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The first components were quite straight forward to implement - headings, paragraphs and images.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Lists were a problem since the API did not mention when a list started or ended. Here I realized that I needed to create my own Typescript types which could map the JSON objects to my internal representation. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lists were a problem since the API did not mention when a list started or ended. Here I realized that I needed to create my own Typescript types which could map the JSON objects to my internal representation. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Likewise, inline text formatting and image captions were blocking points which I solved via my ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Likewise, inline text formatting and image captions were blocking points which I solved via my ","href":null},{"type":"text","text":{"content":"own types","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"own types","href":null},{"type":"text","text":{"content":". With a definitive type in place for each of these complex blocks, it eliminated much of the logic needed to style the React components. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". With a definitive type in place for each of these complex blocks, it eliminated much of the logic needed to style the React components. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"As of now, this site supports","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"As of now, this site supports","href":null}]},{"type":"bulleted_list_item","content":[[{"type":"text","text":{"content":"Headings","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Headings","href":null}],[{"type":"text","text":{"content":"Paragraphs","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Paragraphs","href":null}],[{"type":"text","text":{"content":"Lists","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lists","href":null}],[{"type":"text","text":{"content":"Images and captions","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Images and captions","href":null}],[{"type":"text","text":{"content":"Inline formatting","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Inline formatting","href":null}]]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Notion API Integration","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Notion API Integration","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"For this project, I’m using the official Notion API. While it just recently came off beta, the typescript support was quite poor which was why I had to implement my own private types. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"For this project, I’m using the official Notion API. While it just recently came off beta, the typescript support was quite poor which was why I had to implement my own private types. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Infrastructure image","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Infrastructure image","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"My notion pages are being accessed via my private ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"My notion pages are being accessed via my private ","href":null},{"type":"text","text":{"content":"integration","link":{"url":"https://www.notion.so/my-integrations"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"integration","href":"https://www.notion.so/my-integrations"},{"type":"text","text":{"content":" that allows me to access content ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" that allows me to access content ","href":null},{"type":"text","text":{"content":"without","link":null},"annotations":{"bold":true,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"without","href":null},{"type":"text","text":{"content":" having to make my notion document public. The integration is then consumed on the Vercel edge nodes to create and update the static pages.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" having to make my notion document public. The integration is then consumed on the Vercel edge nodes to create and update the static pages.","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In order to improve the performance of the site and to achieve a better ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In order to improve the performance of the site and to achieve a better ","href":null},{"type":"text","text":{"content":"Lighhouse performance score","link":{"url":"https://web.dev/performance-scoring/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Lighhouse performance score","href":"https://web.dev/performance-scoring/"},{"type":"text","text":{"content":", I implemented optimization options offered by Next.JS and Vercel","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":", I implemented optimization options offered by Next.JS and Vercel","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Image Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Image Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"A big problem was cumulative layout shift. This is when an image starts loading, the layout of the page will change. Content below the image will start shifting down distracting the user. When using the Image component, it is possible to specify the desired with and hight of the image to prevent this. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"A big problem was cumulative layout shift. This is when an image starts loading, the layout of the page will change. Content below the image will start shifting down distracting the user. When using the Image component, it is possible to specify the desired with and hight of the image to prevent this. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"However, this means that there will be a large empty box while the image is loading. This was solved via blurred placeholderes that provide visual context while the actual image is loading. he cu","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"However, this means that there will be a large empty box while the image is loading. This was solved via blurred placeholderes that provide visual context while the actual image is loading. he cu","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"These images are hosted on cloudinary, which is a dedicated image cdn and is cached by image size on Vercel edge nodes. Since these images are cached by image size, only the most appropriatly ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"These images are hosted on cloudinary, which is a dedicated image cdn and is cached by image size on Vercel edge nodes. Since these images are cached by image size, only the most appropriatly ","href":null},{"type":"text","text":{"content":"sized ","link":null},"annotations":{"bold":false,"italic":true,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"sized ","href":null},{"type":"text","text":{"content":"image is downloaded. For example, while the original image has a resolution of 4k, when the web page is loaded on a mobile device, it only downloads a 360p sized image. As a mobile device would not benefit with a 4k sized image, this optimizations saves data for the end user and improves the downoad speed of the image.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"image is downloaded. For example, while the original image has a resolution of 4k, when the web page is loaded on a mobile device, it only downloads a 360p sized image. As a mobile device would not benefit with a 4k sized image, this optimizations saves data for the end user and improves the downoad speed of the image.","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Next.JS Optimizations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Next.JS Optimizations","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Instead of the old website, where the request would go all the way to the notion servers to get content data, with this current website, pages are statically created (Static Generated Pages). The benefit is that, when visiting this page, only an HTML page needs to be served. The content does not need to be hydrated and this allows pages to be served at blazing speeds.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Instead of the old website, where the request would go all the way to the notion servers to get content data, with this current website, pages are statically created (Static Generated Pages). The benefit is that, when visiting this page, only an HTML page needs to be served. The content does not need to be hydrated and this allows pages to be served at blazing speeds.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Sometimes, page content needs to be updated after building the site. Instead of rebuilding the static pages every time, incremental static  regeneration is implemented. Every 60 seconds, Next.JS will check if the page content is different to what it currently is. If it is, it will rebuild just that page and serve it. With this implementation, a change on a notion document will be reflected on the website in under two minuites.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Sometimes, page content needs to be updated after building the site. Instead of rebuilding the static pages every time, incremental static  regeneration is implemented. Every 60 seconds, Next.JS will check if the page content is different to what it currently is. If it is, it will rebuild just that page and serve it. With this implementation, a change on a notion document will be reflected on the website in under two minuites.","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"TODO: Image of old website and new websites light house score","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"TODO: Image of old website and new websites light house score","href":null}]},{"type":"paragraph","content":[]}],"slug":"my-website","page_id":"361e85f3-bef1-4f1a-a4c8-ba60ae4b4c88","title":"My site with NextJS","description":"The process behind creating this website with NextJS","skills":["Next.js","Notion","Chakra UI"],"cover":"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&dl=glenn-carstens-peters-npxXWgQ33ZQ-unsplash.jpg","date":"2022-03-03","published":false}},{"params":{"slug":"hitchspots"},"props":{"blocks":[{"type":"heading_1","content":[{"type":"text","text":{"content":"Motivation","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Motivation","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The best hitchhiking resource to anyone, be it a veteran or a beginner is the ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The best hitchhiking resource to anyone, be it a veteran or a beginner is the ","href":null},{"type":"text","text":{"content":"Hitchwiki","link":{"url":"http://hitchwiki.org/"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Hitchwiki","href":"http://hitchwiki.org/"},{"type":"text","text":{"content":". Among the countless articles, explaining the ways to hitchhike safely to surviving in gas stations, the best is the Hitchwiki map. Over the years, countless hitchhikers have contributed to this map with locations they’ve hitched from. It was a great resource while hitchhiking as it would show nearby spots, or spots in cities im planning to go to and thus I could get dropped near that; it can hours to cross a city by foot so being dropped near a high traffic exit would give me the greatest chance of hitching a ride out. However, over the years, the map lost a bit of functionality (being unable to add new spots) and even wasn’t loading for a few months. One day, while I was browsing the wiki, I found a page that had an export dump of their entire database, containing all 25k hitchhiking spots, which was just around the time I was trying to get into mobile development and I was fishing around for a project. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":". Among the countless articles, explaining the ways to hitchhike safely to surviving in gas stations, the best is the Hitchwiki map. Over the years, countless hitchhikers have contributed to this map with locations they’ve hitched from. It was a great resource while hitchhiking as it would show nearby spots, or spots in cities im planning to go to and thus I could get dropped near that; it can hours to cross a city by foot so being dropped near a high traffic exit would give me the greatest chance of hitching a ride out. However, over the years, the map lost a bit of functionality (being unable to add new spots) and even wasn’t loading for a few months. One day, while I was browsing the wiki, I found a page that had an export dump of their entire database, containing all 25k hitchhiking spots, which was just around the time I was trying to get into mobile development and I was fishing around for a project. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Why not make a mobile app for hitchwiki !","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Why not make a mobile app for hitchwiki !","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Research","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Research","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"I had dabbled a bit in React Native development with the Expo network. In retrospective, the framework felt slow to use and the load time for the software was terrible. The alternate choices I found were flutter and ionic. Making the choice for flutter was quite easy since the ionic framework simply renders JavaScript components meaning that the app would be really slow. On the other hand, Flutter is developed and maintained by Google and it rendered it's components to native components. This means that not only the app be faster but also there would be a ton of new support while learning this new framework","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"I had dabbled a bit in React Native development with the Expo network. In retrospective, the framework felt slow to use and the load time for the software was terrible. The alternate choices I found were flutter and ionic. Making the choice for flutter was quite easy since the ionic framework simply renders JavaScript components meaning that the app would be really slow. On the other hand, Flutter is developed and maintained by Google and it rendered it's components to native components. This means that not only the app be faster but also there would be a ton of new support while learning this new framework","href":null}]},{"type":"heading_2","content":[{"type":"text","text":{"content":"Why not kotolin or swift ?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Why not kotolin or swift ?","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In recent years I had heard more about these cross platform frameworks and I was really excited to try out them first. This was also my first time developing for the mobile platform, so I didn't want to over complicate the developing environment, when everything else was so new. Being able to code for both an iOS device and a Android device sounded really amazing and I wanted to learn how flutter had made this possible, which made is easier to overlook some of the fine tuning you're able to do when coding in the platform’s native languages. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In recent years I had heard more about these cross platform frameworks and I was really excited to try out them first. This was also my first time developing for the mobile platform, so I didn't want to over complicate the developing environment, when everything else was so new. Being able to code for both an iOS device and a Android device sounded really amazing and I wanted to learn how flutter had made this possible, which made is easier to overlook some of the fine tuning you're able to do when coding in the platform’s native languages. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Design","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Design","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"The entire design was inspired by Google Maps. I’ve been a huge fan of how google maps implements it’s review system and I wanted to emulate that. I took a few screenshots of google maps, copied it over to Figma and started work on how I wanted the layout to look. I spent most of my time here figuring out the information structure and tried to adhere to the Google Maps design as closely as possible. As a new designer, I wasn’t confident in making User Interfaces and so I figured I could replicate google maps and try to understand why it works. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"The entire design was inspired by Google Maps. I’ve been a huge fan of how google maps implements it’s review system and I wanted to emulate that. I took a few screenshots of google maps, copied it over to Figma and started work on how I wanted the layout to look. I spent most of my time here figuring out the information structure and tried to adhere to the Google Maps design as closely as possible. As a new designer, I wasn’t confident in making User Interfaces and so I figured I could replicate google maps and try to understand why it works. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"Development","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Development","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Having only had developed sample applications in flutter, this was my first time combining every thing I had learnt before to a single project. This is my favorite way of learning a project, since it requires you to creatively combine what you already have learnt and along the way, you discover unique problems that requires to be solved creatively. I started the development with the core functionalities in mind ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Having only had developed sample applications in flutter, this was my first time combining every thing I had learnt before to a single project. This is my favorite way of learning a project, since it requires you to creatively combine what you already have learnt and along the way, you discover unique problems that requires to be solved creatively. I started the development with the core functionalities in mind ","href":null}]},{"type":"numbered_list_item","content":[[{"type":"text","text":{"content":"Display a map with locations","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Display a map with locations","href":null}],[{"type":"text","text":{"content":"Cluster locations together to reduce visual clutter","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Cluster locations together to reduce visual clutter","href":null}],[{"type":"text","text":{"content":"Add locations to the map","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add locations to the map","href":null}],[{"type":"text","text":{"content":"Add reviews to these locations.","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Add reviews to these locations.","href":null}]]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Using Firebase as a back-end service, I didn’t have to write any code with databases or authentication. The 2nd party Firebase libraries would handle this for me, and I would write the logic around that, expressing how data was to be added and which pages were shown for authenticated users. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Using Firebase as a back-end service, I didn’t have to write any code with databases or authentication. The 2nd party Firebase libraries would handle this for me, and I would write the logic around that, expressing how data was to be added and which pages were shown for authenticated users. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"After the initial version, I shared it among a few users on the hitchhiking sub-reddit where they helped me discover some unique edge cases. As with developing for devices that have variable screen sizes, it turned out that some locations weren’t getting clustered properly. I fixed this by tweaking the numbers on the clustering algorithm such that only points within the screen were considered for clustering. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"After the initial version, I shared it among a few users on the hitchhiking sub-reddit where they helped me discover some unique edge cases. As with developing for devices that have variable screen sizes, it turned out that some locations weren’t getting clustered properly. I fixed this by tweaking the numbers on the clustering algorithm such that only points within the screen were considered for clustering. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"In the next step of development, I focused on enhancing user functionality. I added a login feature such that while all users could view locations, only users that were logged in could contribute. This step required me to design a login flow that would allow a user to login in via google and set a display name. Most hitchhikers do not want their public names to be showcased and I understood that it would be better to ask them for a display name than extract it from their google account. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"In the next step of development, I focused on enhancing user functionality. I added a login feature such that while all users could view locations, only users that were logged in could contribute. This step required me to design a login flow that would allow a user to login in via google and set a display name. Most hitchhikers do not want their public names to be showcased and I understood that it would be better to ask them for a display name than extract it from their google account. ","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"To polish up the app, I started to implement in Material animations. This is a great moment to talk about the material design kit. Developing for flutter, google has made it super easy to work with material by providing pre-built components that would be rendered natively. As a new designer, material was a great toolkit to understand the principles behind design. It would explain how and why to use components that I rarely had any doubt when creating this UI. These animations would sit inbet","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"To polish up the app, I started to implement in Material animations. This is a great moment to talk about the material design kit. Developing for flutter, google has made it super easy to work with material by providing pre-built components that would be rendered natively. As a new designer, material was a great toolkit to understand the principles behind design. It would explain how and why to use components that I rarely had any doubt when creating this UI. These animations would sit inbet","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"Finally, I introduced an on-boarding process to help new users understand the core features of this app. ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Finally, I introduced an on-boarding process to help new users understand the core features of this app. ","href":null}]},{"type":"heading_1","content":[{"type":"text","text":{"content":"DevOps","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"DevOps","href":null}]},{"type":"paragraph","content":[{"type":"text","text":{"content":"During the initial stages of development, I was using an emulator and my personal phone to side load the app. However, once I got to the initial alpha stage where I deployed it on the playstore, I soon understood how time consuming it was to assign the correct version no, build the app, upload it to the play store & finally publish it. To automate this entire step, i decided to use the power of github actions and fastlane to help automate these steps. With this, once I push my code to ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"During the initial stages of development, I was using an emulator and my personal phone to side load the app. However, once I got to the initial alpha stage where I deployed it on the playstore, I soon understood how time consuming it was to assign the correct version no, build the app, upload it to the play store & finally publish it. To automate this entire step, i decided to use the power of github actions and fastlane to help automate these steps. With this, once I push my code to ","href":null},{"type":"text","text":{"content":"main","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"main","href":null},{"type":"text","text":{"content":"and fastlane takes care of building, signing and uploading the app to the playstore. It will also create a new release in the alpha track. This allows me to review the release and publish it. Once I test the alpha version on my test devices and alpha testers, I merely have to push it to the release track and it is available to the public. With this, I was able to automate a step that usually took me close to an hour down to a single line of ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"and fastlane takes care of building, signing and uploading the app to the playstore. It will also create a new release in the alpha track. This allows me to review the release and publish it. Once I test the alpha version on my test devices and alpha testers, I merely have to push it to the release track and it is available to the public. With this, I was able to automate a step that usually took me close to an hour down to a single line of ","href":null},{"type":"text","text":{"content":"git push","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"git push","href":null},{"type":"text","text":{"content":".","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":".","href":null}]},{"type":"paragraph","content":[]}],"slug":"hitchspots","page_id":"69a3a6f4-3966-45b6-a8aa-d0fb365926d5","title":"Hitchspots","description":"Developing an app for hitchhikers to discover popular spots","skills":["Flutter","Firebase"],"cover":"https://images.unsplash.com/photo-1630163747141-8c5c26312c5a?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb","date":"2022-02-13","published":true}}]